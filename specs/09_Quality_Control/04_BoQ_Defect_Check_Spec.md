# 清单缺陷检查规格说明书

> 版本：V1.0  
> 更新日期：2026-01-18  
> 文档状态：初稿  
> 所属模块：09_Quality_Control  
> 上级文档：00_QC_Overview_Spec.md

---

## 1. 功能概述

### 1.1 功能定位

清单缺陷检查是质控模块的**内容质量检查层**，通过规则引擎识别清单编制过程中的各类缺陷，确保清单内容的完整性、准确性和逻辑性。

```
┌─────────────────────────────────────────────────────────────────────────┐
│                          清单缺陷检查定位                                │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│   检查层次                                                              │
│   ────────                                                              │
│   ┌─────────────┐                                                       │
│   │ 合规性检查  │ ◀── 格式层：编码、单位、结构                         │
│   ├─────────────┤                                                       │
│   │ 价格检查    │ ◀── 价值层：材料价格、综合单价                       │
│   ├─────────────┤                                                       │
│   │ 清单缺陷检查│ ◀── 内容层：特征、漏项、工程量（本文档）             │
│   ├─────────────┤                                                       │
│   │ 指标检查    │ ◀── 宏观层：造价指标、含量指标                       │
│   └─────────────┘                                                       │
│                                                                         │
│   四类缺陷                                                              │
│   ────────                                                              │
│   ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  │
│   │  特征缺失   │  │  特征矛盾   │  │  清单漏项   │  │ 工程量异常  │  │
│   │  Missing    │  │ Conflict    │  │   Missing   │  │  Abnormal   │  │
│   ├─────────────┤  ├─────────────┤  ├─────────────┤  ├─────────────┤  │
│   │ 必填特征    │  │ 特征值与    │  │ 关联项目    │  │ 工程量为零  │  │
│   │ 字段为空    │  │ 名称/其他   │  │ 应有未有    │  │ 负数/过大   │  │
│   │ 或缺少      │  │ 特征矛盾    │  │ （如有梁    │  │ 量级异常    │  │
│   │             │  │             │  │  无模板）   │  │             │  │
│   └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘  │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### 1.2 检查范围

| 检查类别 | 检查目的 | 影响程度 |
|----------|----------|:--------:|
| 特征缺失检查 | 确保清单项描述完整，可准确组价 | ★★★ |
| 特征矛盾检查 | 确保清单项信息一致，无逻辑错误 | ★★★ |
| 清单漏项检查 | 确保工程内容完整，无遗漏 | ★★★★ |
| 工程量异常检查 | 确保工程量数据合理，无明显错误 | ★★★ |

### 1.3 适用文件类型

| 文件类型 | 特征缺失 | 特征矛盾 | 清单漏项 | 工程量异常 |
|----------|:--------:|:--------:|:--------:|:----------:|
| 估算文件 | ○ | ○ | ○ | ○ |
| 概算文件 | ○ | ○ | ○ | ● |
| 招标控制价 | ● | ● | ● | ● |
| 投标文件 | ● | ● | ● | ● |
| 合同价 | ● | ● | ● | ● |
| 结算文件 | ● | ● | ● | ● |

> ● 全部适用 ○ 部分适用

---

## 2. 特征缺失检查

### 2.1 检查原理

特征缺失检查确保清单项的**必填特征**完整，以便准确描述工程内容和正确组价。

```
┌─────────────────────────────────────────────────────────────────────────┐
│                          特征缺失检查原理                                │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│   清单项特征的重要性                                                    │
│   ──────────────────                                                    │
│                                                                         │
│   清单项 = 清单编码 + 项目名称 + 项目特征 + 计量单位 + 工程量           │
│                              ↑                                          │
│                         关键描述信息                                    │
│                                                                         │
│   特征缺失的影响：                                                      │
│   • 无法准确套用定额                                                    │
│   • 可能导致组价错误                                                    │
│   • 结算时产生争议                                                      │
│   • 影响项目特征的可比性                                                │
│                                                                         │
│   示例：矩形柱清单项                                                    │
│   ┌─────────────────────────────────────────────────────────────────┐  │
│   │ 清单编码：010501004001                                           │  │
│   │ 项目名称：矩形柱                                                 │  │
│   │ 项目特征：                                                        │  │
│   │   1. 混凝土强度等级：C30          ← 必填 ✓                       │  │
│   │   2. 截面尺寸：______             ← 必填 ✗ 缺失！                │  │
│   │   3. 柱高：______                 ← 必填 ✗ 缺失！                │  │
│   │ 计量单位：m³                                                      │  │
│   │ 工程量：125.60                                                   │  │
│   └─────────────────────────────────────────────────────────────────┘  │
│                                                                         │
│   问题：缺少截面尺寸和柱高，无法准确套模板定额和判断是否超高           │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### 2.2 必填特征规则库

#### 2.2.1 混凝土工程

| 清单项 | 必填特征 | 特征说明 | 组价影响 |
|--------|----------|----------|----------|
| 矩形柱 | 混凝土强度等级 | C15~C60 | 材料单价 |
| | 截面尺寸 | 如400×400 | 模板工程量 |
| | 柱高 | 层高或具体高度 | 超高增加费 |
| 矩形梁 | 混凝土强度等级 | C15~C60 | 材料单价 |
| | 截面尺寸 | 如250×500 | 模板工程量 |
| | 梁类型 | 框架梁/连梁/次梁 | 钢筋含量差异 |
| 现浇板 | 混凝土强度等级 | C15~C60 | 材料单价 |
| | 板厚 | 如120mm | 材料用量 |
| | 板类型 | 有梁板/无梁板/平板 | 模板类型 |
| 基础 | 混凝土强度等级 | C15~C60 | 材料单价 |
| | 基础类型 | 独立基础/条形基础/筏板 | 定额选择 |
| | 垫层情况 | 有/无，厚度 | 是否单独列项 |

#### 2.2.2 钢筋工程

| 清单项 | 必填特征 | 特征说明 | 组价影响 |
|--------|----------|----------|----------|
| 现浇构件钢筋 | 钢筋种类 | HPB300/HRB400/HRB500 | 材料单价 |
| | 钢筋规格 | Φ6~Φ32 | 加工损耗率 |
| | 连接方式 | 绑扎/焊接/机械连接 | 连接费用 |

#### 2.2.3 砌筑工程

| 清单项 | 必填特征 | 特征说明 | 组价影响 |
|--------|----------|----------|----------|
| 砖墙 | 墙体材料 | 烧结砖/加气块/空心砖 | 材料单价 |
| | 墙厚 | 120/200/240mm | 材料用量 |
| | 砂浆种类及强度 | 水泥砂浆M5/混合砂浆M5 | 材料单价 |
| | 墙体类型 | 承重墙/填充墙/隔墙 | 定额选择 |

#### 2.2.4 门窗工程

| 清单项 | 必填特征 | 特征说明 | 组价影响 |
|--------|----------|----------|----------|
| 门 | 门类型 | 防火门/防盗门/木门/玻璃门 | 定额和材料 |
| | 规格尺寸 | 如1000×2100 | 材料单价 |
| | 材质 | 钢质/木质/铝合金 | 材料单价 |
| | 五金配件 | 含/不含，品牌要求 | 组价内容 |
| 窗 | 窗类型 | 推拉窗/平开窗/固定窗 | 定额选择 |
| | 规格尺寸 | 如1500×1800 | 材料单价 |
| | 材质 | 铝合金/塑钢/断桥铝 | 材料单价 |
| | 玻璃类型 | 单层/中空/Low-E | 材料单价 |

#### 2.2.5 安装工程

| 清单项 | 必填特征 | 特征说明 | 组价影响 |
|--------|----------|----------|----------|
| 管道安装 | 管材材质 | PPR/PVC/镀锌钢管 | 材料单价 |
| | 公称直径 | DN20~DN150 | 材料和人工 |
| | 连接方式 | 热熔/丝扣/法兰 | 辅材和人工 |
| | 安装位置 | 室内/室外/埋地 | 定额选择 |
| 电缆敷设 | 电缆型号 | YJV/BV/RVV等 | 材料单价 |
| | 截面积 | 2.5~240mm² | 材料单价 |
| | 敷设方式 | 穿管/桥架/直埋 | 定额选择 |

### 2.3 检查规则

| 规则ID | 规则名称 | 检查逻辑 | 严重程度 |
|--------|----------|----------|:--------:|
| BOQ-MIS-001 | 必填特征缺失 | 必填特征字段为空或不存在 | 🔴 严重 |
| BOQ-MIS-002 | 特征描述为空 | 项目特征整体为空 | 🔴 严重 |
| BOQ-MIS-003 | 关键特征缺失 | 影响组价的关键特征缺失 | 🔴 严重 |
| BOQ-MIS-004 | 次要特征缺失 | 非关键特征缺失 | 🟡 一般 |
| BOQ-MIS-005 | 特征数量过少 | 特征条数明显少于同类清单项 | 🔵 提示 |
| BOQ-MIS-006 | 特征格式不规范 | 特征描述格式不符合规范 | 🔵 提示 |

---

## 3. 特征矛盾检查

### 3.1 检查原理

特征矛盾检查识别清单项内部的**逻辑不一致**问题，包括特征值之间的矛盾、特征与名称的矛盾等。

```
┌─────────────────────────────────────────────────────────────────────────┐
│                          特征矛盾检查原理                                │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│   矛盾类型1：名称与特征矛盾                                             │
│   ─────────────────────────                                             │
│                                                                         │
│   ┌─────────────────────────────────────────────────────────────────┐  │
│   │ 项目名称：C30矩形柱                                              │  │
│   │ 项目特征：                                                        │  │
│   │   1. 混凝土强度等级：C40    ← ✗ 与名称中的"C30"矛盾            │  │
│   │   2. 截面尺寸：400×400                                           │  │
│   └─────────────────────────────────────────────────────────────────┘  │
│                                                                         │
│   矛盾类型2：特征之间矛盾                                               │
│   ─────────────────────                                                 │
│                                                                         │
│   ┌─────────────────────────────────────────────────────────────────┐  │
│   │ 项目名称：矩形柱                                                 │  │
│   │ 项目特征：                                                        │  │
│   │   1. 截面尺寸：400×400                                           │  │
│   │   2. 截面周长：1200mm       ← ✗ 应为1600mm，计算矛盾            │  │
│   └─────────────────────────────────────────────────────────────────┘  │
│                                                                         │
│   矛盾类型3：特征与单位矛盾                                             │
│   ─────────────────────────                                             │
│                                                                         │
│   ┌─────────────────────────────────────────────────────────────────┐  │
│   │ 项目名称：钢筋                                                   │  │
│   │ 项目特征：                                                        │  │
│   │   1. 规格：Φ12                                                   │  │
│   │ 计量单位：m      ← ✗ 钢筋应按t或kg计量                          │  │
│   └─────────────────────────────────────────────────────────────────┘  │
│                                                                         │
│   矛盾类型4：特征与编码矛盾                                             │
│   ─────────────────────────                                             │
│                                                                         │
│   ┌─────────────────────────────────────────────────────────────────┐  │
│   │ 清单编码：010501004001（矩形柱）                                 │  │
│   │ 项目名称：矩形梁            ← ✗ 编码对应柱，名称写成梁          │  │
│   └─────────────────────────────────────────────────────────────────┘  │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### 3.2 矛盾规则分类

#### 3.2.1 名称-特征矛盾规则

| 矛盾类型 | 检查逻辑 | 示例 |
|----------|----------|------|
| 强度等级矛盾 | 名称中的强度与特征中的强度不一致 | 名称"C30柱"，特征"C40" |
| 规格尺寸矛盾 | 名称中的规格与特征中的规格不一致 | 名称"DN100管"，特征"DN80" |
| 材料类型矛盾 | 名称中的材料与特征中的材料不一致 | 名称"铝合金窗"，特征"塑钢" |
| 构件类型矛盾 | 名称中的类型与特征中的类型不一致 | 名称"框架梁"，特征"连梁" |

#### 3.2.2 特征间矛盾规则

| 矛盾类型 | 检查逻辑 | 示例 |
|----------|----------|------|
| 几何计算矛盾 | 尺寸与周长/面积/体积不匹配 | 截面400×400，周长1200（应1600） |
| 等级逻辑矛盾 | 相关等级不匹配 | 抗渗混凝土P6，强度C15（不合理） |
| 材料配套矛盾 | 相关材料不匹配 | 铝合金门框，木门扇 |
| 数值范围矛盾 | 特征值超出合理范围 | 板厚500mm（常规60-200mm） |

#### 3.2.3 特征-单位矛盾规则

| 清单类型 | 正确单位 | 常见错误单位 |
|----------|----------|--------------|
| 混凝土工程 | m³ | m²、m |
| 钢筋工程 | t、kg | m、根 |
| 砌筑工程 | m³ | m²（墙可按m²但需注明） |
| 模板工程 | m² | m³、m |
| 涂料工程 | m² | L、kg |
| 管道工程 | m | 根、m² |

#### 3.2.4 编码-名称矛盾规则

| 编码前9位 | 对应清单项 | 常见错误 |
|-----------|-----------|----------|
| 010501001 | 带形基础 | 误写为独立基础 |
| 010501004 | 矩形柱 | 误写为圆形柱或梁 |
| 010502001 | 矩形梁 | 误写为柱或板 |
| 010503001 | 有梁板 | 误写为无梁板 |

### 3.3 检查规则

| 规则ID | 规则名称 | 检查逻辑 | 严重程度 |
|--------|----------|----------|:--------:|
| BOQ-CON-001 | 名称与特征强度矛盾 | 名称中的强度等级与特征不一致 | 🔴 严重 |
| BOQ-CON-002 | 名称与特征规格矛盾 | 名称中的规格与特征不一致 | 🔴 严重 |
| BOQ-CON-003 | 名称与特征材料矛盾 | 名称中的材料与特征不一致 | 🔴 严重 |
| BOQ-CON-004 | 特征间几何计算矛盾 | 尺寸与周长/面积计算不符 | 🟡 一般 |
| BOQ-CON-005 | 特征间等级逻辑矛盾 | 相关等级配置不合理 | 🟡 一般 |
| BOQ-CON-006 | 特征与单位矛盾 | 特征内容与计量单位不匹配 | 🔴 严重 |
| BOQ-CON-007 | 编码与名称矛盾 | 清单编码与项目名称不对应 | 🔴 严重 |
| BOQ-CON-008 | 特征值超出范围 | 特征值超出常规取值范围 | 🟡 一般 |

---

## 4. 清单漏项检查

### 4.1 检查原理

清单漏项检查通过**关联分析**识别应有但未列的清单项，防止工程内容遗漏。

```
┌─────────────────────────────────────────────────────────────────────────┐
│                          清单漏项检查原理                                │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│   关联规则：某些清单项之间存在必然的关联关系                            │
│   ────────────────────────────────────────────                          │
│                                                                         │
│   规则1：有混凝土必有模板（现浇构件）                                   │
│   ┌─────────────────────────────────────────────────────────────────┐  │
│   │ 存在：矩形柱（混凝土）125.6 m³                                   │  │
│   │ 应有：矩形柱模板 ______ m²         ← ✗ 漏项！                   │  │
│   │                                                                  │  │
│   │ 估算：模板面积 ≈ 混凝土量 × 模板系数                            │  │
│   │       125.6 × 8 ≈ 1005 m²                                       │  │
│   └─────────────────────────────────────────────────────────────────┘  │
│                                                                         │
│   规则2：有混凝土必有钢筋（配筋构件）                                   │
│   ┌─────────────────────────────────────────────────────────────────┐  │
│   │ 存在：矩形柱（混凝土）125.6 m³                                   │  │
│   │ 应有：柱钢筋 ______ t              ← ✗ 漏项！                   │  │
│   │                                                                  │  │
│   │ 估算：钢筋量 ≈ 混凝土量 × 含钢量                                │  │
│   │       125.6 × 0.12 ≈ 15 t                                       │  │
│   └─────────────────────────────────────────────────────────────────┘  │
│                                                                         │
│   规则3：有门窗必有门窗框塞缝                                           │
│   ┌─────────────────────────────────────────────────────────────────┐  │
│   │ 存在：铝合金窗 156 m²                                            │  │
│   │ 应有：窗框塞缝 ______ m            ← ✗ 漏项！                   │  │
│   └─────────────────────────────────────────────────────────────────┘  │
│                                                                         │
│   规则4：有管道必有管道支架（明装管道）                                 │
│   ┌─────────────────────────────────────────────────────────────────┐  │
│   │ 存在：给水管道DN50 256 m                                         │  │
│   │ 应有：管道支架 ______ 个           ← ⚠️ 可能漏项                │  │
│   └─────────────────────────────────────────────────────────────────┘  │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### 4.2 关联规则库

#### 4.2.1 混凝土工程关联

| 主清单项 | 关联清单项 | 关联关系 | 必要性 |
|----------|-----------|----------|:------:|
| 现浇混凝土柱 | 柱模板 | 必须 | ● |
| | 柱钢筋 | 必须 | ● |
| 现浇混凝土梁 | 梁模板 | 必须 | ● |
| | 梁钢筋 | 必须 | ● |
| 现浇混凝土板 | 板模板 | 必须 | ● |
| | 板钢筋 | 必须 | ● |
| | 板面找平层 | 视情况 | ○ |
| 现浇混凝土墙 | 墙模板 | 必须 | ● |
| | 墙钢筋 | 必须 | ● |
| 现浇混凝土基础 | 基础模板 | 视类型 | ○ |
| | 基础钢筋 | 必须 | ● |
| | 垫层 | 通常需要 | ● |

#### 4.2.2 砌筑工程关联

| 主清单项 | 关联清单项 | 关联关系 | 必要性 |
|----------|-----------|----------|:------:|
| 砖墙/砌块墙 | 墙体拉结筋 | 必须 | ● |
| | 构造柱 | 视规范 | ○ |
| | 过梁 | 有门窗洞口时 | ● |
| | 墙面抹灰 | 通常需要 | ○ |
| 填充墙 | 填充墙拉结筋 | 必须 | ● |
| | 填充墙构造柱 | 视规范 | ○ |

#### 4.2.3 门窗工程关联

| 主清单项 | 关联清单项 | 关联关系 | 必要性 |
|----------|-----------|----------|:------:|
| 门 | 门框塞缝 | 必须 | ● |
| | 门槛石 | 视设计 | ○ |
| | 门套 | 视设计 | ○ |
| 窗 | 窗框塞缝 | 必须 | ● |
| | 窗台板 | 视设计 | ○ |
| | 窗帘盒 | 视设计 | ○ |

#### 4.2.4 屋面工程关联

| 主清单项 | 关联清单项 | 关联关系 | 必要性 |
|----------|-----------|----------|:------:|
| 屋面防水 | 防水保护层 | 必须 | ● |
| | 找平层 | 必须 | ● |
| | 找坡层 | 视构造 | ○ |
| 保温屋面 | 保温层 | 必须 | ● |
| | 隔汽层 | 视构造 | ○ |
| 屋面 | 檐沟/天沟 | 视设计 | ○ |
| | 泛水 | 有女儿墙时 | ● |
| | 屋面出入口 | 视设计 | ○ |

#### 4.2.5 安装工程关联

| 主清单项 | 关联清单项 | 关联关系 | 必要性 |
|----------|-----------|----------|:------:|
| 给水管道 | 阀门 | 必须 | ● |
| | 管道支架 | 明装时必须 | ● |
| | 管道保温 | 视要求 | ○ |
| | 管道试压 | 必须 | ● |
| 排水管道 | 检查口/清扫口 | 必须 | ● |
| | 地漏 | 卫生间/厨房 | ● |
| 电线导管 | 接线盒 | 必须 | ● |
| | 管道支架 | 明装时 | ○ |
| 电缆桥架 | 桥架支架 | 必须 | ● |
| | 桥架附件 | 必须 | ● |
| 配电箱 | 箱体基础 | 落地式 | ○ |
| | 进出线管 | 必须 | ● |

### 4.3 关联系数参考

用于估算漏项工程量，辅助判断漏项的合理数量：

| 主清单项 | 关联清单项 | 关联系数 | 单位换算 |
|----------|-----------|:--------:|----------|
| 混凝土柱 | 柱模板 | 6~10 | m²/m³ |
| 混凝土梁 | 梁模板 | 5~8 | m²/m³ |
| 混凝土板 | 板模板 | 1.1~1.2 | m²/m² |
| 混凝土柱 | 柱钢筋 | 100~150 | kg/m³ |
| 混凝土梁 | 梁钢筋 | 120~180 | kg/m³ |
| 混凝土板 | 板钢筋 | 80~120 | kg/m³ |
| 砖墙 | 拉结筋 | 0.3~0.5 | kg/m³ |
| 门窗 | 框塞缝 | 周长 | m/樘 |
| 管道 | 支架 | 0.3~0.5 | 个/m |
| 管道 | 阀门 | 0.1~0.2 | 个/m |

### 4.4 检查规则

| 规则ID | 规则名称 | 检查逻辑 | 严重程度 |
|--------|----------|----------|:--------:|
| BOQ-OMS-001 | 模板漏项 | 有混凝土无对应模板 | 🔴 严重 |
| BOQ-OMS-002 | 钢筋漏项 | 有混凝土无对应钢筋 | 🔴 严重 |
| BOQ-OMS-003 | 垫层漏项 | 有基础无垫层 | 🟡 一般 |
| BOQ-OMS-004 | 拉结筋漏项 | 有填充墙无拉结筋 | 🟡 一般 |
| BOQ-OMS-005 | 过梁漏项 | 有门窗洞口无过梁 | 🟡 一般 |
| BOQ-OMS-006 | 门窗塞缝漏项 | 有门窗无框塞缝 | 🟡 一般 |
| BOQ-OMS-007 | 防水保护层漏项 | 有防水无保护层 | 🟡 一般 |
| BOQ-OMS-008 | 管道阀门漏项 | 有给水管无阀门 | 🟡 一般 |
| BOQ-OMS-009 | 管道支架漏项 | 有明装管道无支架 | 🔵 提示 |
| BOQ-OMS-010 | 管道试压漏项 | 有给水管无试压 | 🔵 提示 |
| BOQ-OMS-011 | 关联工程量异常 | 关联项工程量比例异常 | 🟡 一般 |

---

## 5. 工程量异常检查

### 5.1 检查原理

工程量异常检查识别工程量数据中的**明显错误**和**可疑数据**。

```
┌─────────────────────────────────────────────────────────────────────────┐
│                        工程量异常检查原理                                │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│   异常类型1：零值异常                                                   │
│   ─────────────────                                                     │
│   ┌─────────────────────────────────────────────────────────────────┐  │
│   │ 清单项：矩形柱 C30                                               │  │
│   │ 工程量：0 m³                    ← ✗ 有清单项但工程量为零         │  │
│   │ 综合单价：580元/m³                                               │  │
│   │ 合价：0元                                                        │  │
│   └─────────────────────────────────────────────────────────────────┘  │
│                                                                         │
│   异常类型2：负值异常                                                   │
│   ─────────────────                                                     │
│   ┌─────────────────────────────────────────────────────────────────┐  │
│   │ 清单项：土方回填                                                 │  │
│   │ 工程量：-125.6 m³               ← ✗ 工程量不应为负值            │  │
│   │                                     （除非是扣减项）             │  │
│   └─────────────────────────────────────────────────────────────────┘  │
│                                                                         │
│   异常类型3：量级异常                                                   │
│   ─────────────────                                                     │
│   ┌─────────────────────────────────────────────────────────────────┐  │
│   │ 清单项：矩形柱 C30                                               │  │
│   │ 工程量：12560 m³                ← ⚠️ 单项工程量过大             │  │
│   │                                     可能是输入错误(125.6→12560) │  │
│   └─────────────────────────────────────────────────────────────────┘  │
│                                                                         │
│   异常类型4：精度异常                                                   │
│   ─────────────────                                                     │
│   ┌─────────────────────────────────────────────────────────────────┐  │
│   │ 清单项：阀门                                                     │  │
│   │ 工程量：12.5 个                 ← ⚠️ 个数应为整数               │  │
│   └─────────────────────────────────────────────────────────────────┘  │
│                                                                         │
│   异常类型5：比例异常                                                   │
│   ─────────────────                                                     │
│   ┌─────────────────────────────────────────────────────────────────┐  │
│   │ 柱混凝土：125.6 m³                                               │  │
│   │ 柱模板：  256.8 m²              ← ⚠️ 模板/混凝土比仅2.04        │  │
│   │                                     正常应在6-10之间             │  │
│   └─────────────────────────────────────────────────────────────────┘  │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### 5.2 异常检测规则

#### 5.2.1 零值/负值检测

| 规则 | 检查逻辑 | 例外情况 |
|------|----------|----------|
| 零值检测 | 工程量 = 0 且 单价 > 0 | 暂列项、计日工等特殊项 |
| 负值检测 | 工程量 < 0 | 扣减项（需明确标注） |

#### 5.2.2 量级检测

| 清单类型 | 单位 | 合理范围 | 异常阈值 |
|----------|------|----------|:--------:|
| 混凝土柱 | m³ | 0.1~500 | >1000 |
| 混凝土梁 | m³ | 0.1~1000 | >2000 |
| 混凝土板 | m³ | 1~2000 | >5000 |
| 钢筋 | t | 0.01~500 | >1000 |
| 砌体墙 | m³ | 1~5000 | >10000 |
| 模板 | m² | 1~50000 | >100000 |
| 门 | 樘 | 1~500 | >1000 |
| 窗 | m² | 1~5000 | >10000 |
| 管道 | m | 1~10000 | >50000 |

#### 5.2.3 精度检测

| 单位类型 | 期望精度 | 检测规则 |
|----------|----------|----------|
| 个、樘、套、台 | 整数 | 小数部分应为0 |
| m³ | 2位小数 | 超过3位小数告警 |
| m² | 2位小数 | 超过3位小数告警 |
| m | 2位小数 | 超过3位小数告警 |
| t | 3位小数 | 超过4位小数告警 |
| kg | 2位小数 | 超过3位小数告警 |

#### 5.2.4 比例检测

| 关联项 | 合理比例 | 检测范围 |
|--------|:--------:|:--------:|
| 柱模板/柱混凝土 | 6~10 m²/m³ | <4 或 >15 告警 |
| 梁模板/梁混凝土 | 5~8 m²/m³ | <3 或 >12 告警 |
| 板模板/板混凝土 | 0.8~1.2 m²/m² | <0.5 或 >1.5 告警 |
| 柱钢筋/柱混凝土 | 100~150 kg/m³ | <60 或 >200 告警 |
| 梁钢筋/梁混凝土 | 120~180 kg/m³ | <80 或 >250 告警 |
| 板钢筋/板混凝土 | 80~120 kg/m³ | <40 或 >180 告警 |

### 5.3 检查规则

| 规则ID | 规则名称 | 检查逻辑 | 严重程度 |
|--------|----------|----------|:--------:|
| BOQ-QTY-001 | 工程量为零 | 工程量=0 且 单价>0 | 🔴 严重 |
| BOQ-QTY-002 | 工程量为负 | 工程量<0（非扣减项） | 🔴 严重 |
| BOQ-QTY-003 | 工程量过大 | 超出该类清单项的量级阈值 | 🟡 一般 |
| BOQ-QTY-004 | 工程量过小 | 明显小于合理最小值 | 🔵 提示 |
| BOQ-QTY-005 | 精度异常 | 小数位数超出合理精度 | 🔵 提示 |
| BOQ-QTY-006 | 整数项有小数 | 应为整数的项有小数 | 🟡 一般 |
| BOQ-QTY-007 | 关联比例异常 | 关联项工程量比例超出范围 | 🟡 一般 |
| BOQ-QTY-008 | 疑似录入错误 | 工程量可能存在小数点错位 | 🟡 一般 |

---

## 6. 检查流程

### 6.1 整体流程

```
┌─────────────────────────────────────────────────────────────────────────┐
│                        清单缺陷检查整体流程                              │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  ┌─────────────────┐                                                    │
│  │   输入造价文件   │                                                    │
│  └────────┬────────┘                                                    │
│           │                                                             │
│           ▼                                                             │
│  ┌─────────────────┐                                                    │
│  │  提取清单项列表  │                                                    │
│  └────────┬────────┘                                                    │
│           │                                                             │
│           ▼                                                             │
│  ┌─────────────────┐                                                    │
│  │  清单项标准化   │  清单 → SBoQCode                                  │
│  │  识别清单类型   │  匹配必填特征规则                                 │
│  └────────┬────────┘                                                    │
│           │                                                             │
│  ─────────┼─────────────────────────────────────────────────────────   │
│           │                                                             │
│     ┌─────┴─────┬─────────────┬─────────────┐                          │
│     ▼           ▼             ▼             ▼                          │
│ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐                       │
│ │特征缺失 │ │特征矛盾 │ │清单漏项 │ │工程量   │                       │
│ │检查     │ │检查     │ │检查     │ │异常检查 │                       │
│ │         │ │         │ │         │ │         │                       │
│ │①加载必 │ │①提取名 │ │①识别主 │ │①检查零 │                       │
│ │ 填特征 │ │ 称信息  │ │ 清单项  │ │ 值负值  │                       │
│ │②逐项检 │ │②检查名 │ │②查询关 │ │②检查量 │                       │
│ │ 查完整 │ │ 称-特征 │ │ 联规则  │ │ 级范围  │                       │
│ │③标记缺 │ │③检查特 │ │③检查关 │ │③检查精 │                       │
│ │ 失字段 │ │ 征内部  │ │ 联项存  │ │ 度要求  │                       │
│ │         │ │④检查编 │ │ 在性    │ │④检查关 │                       │
│ │         │ │ 码-名称 │ │④估算漏 │ │ 联比例  │                       │
│ │         │ │         │ │ 项数量  │ │         │                       │
│ └────┬────┘ └────┬────┘ └────┬────┘ └────┬────┘                       │
│      │           │           │           │                             │
│      └───────────┴───────────┴───────────┘                             │
│                       │                                                 │
│                       ▼                                                 │
│              ┌─────────────────┐                                        │
│              │  汇总检查结果   │                                        │
│              │  生成Issue列表  │                                        │
│              └─────────────────┘                                        │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### 6.2 检查优先级

| 优先级 | 检查类型 | 说明 |
|:------:|----------|------|
| 1 | 特征缺失检查 | 基础检查，不依赖其他数据 |
| 2 | 特征矛盾检查 | 基于特征内容的逻辑分析 |
| 3 | 工程量异常检查 | 数值型数据检查 |
| 4 | 清单漏项检查 | 需要整体分析，最慢 |

### 6.3 依赖数据

| 数据源 | 用途 | 必要性 |
|--------|------|:------:|
| 标准清单库（SBoQ） | 识别清单类型 | 必须 |
| 必填特征规则库 | 特征缺失检查 | 必须 |
| 矛盾检测规则库 | 特征矛盾检查 | 必须 |
| 关联规则库 | 清单漏项检查 | 必须 |
| 量级阈值配置 | 工程量异常检查 | 必须 |
| 关联系数表 | 漏项数量估算 | 推荐 |

---

## 7. 规则配置

### 7.1 规则数据结构

```typescript
interface BoQDefectRule {
  // 基本信息
  ruleId: string;
  ruleName: string;
  ruleType: 'missing' | 'conflict' | 'omission' | 'quantity';
  
  // 规则定义
  description: string;
  checkLogic: string;
  
  // 适用范围
  applicableSBoQCodes: string[];   // 适用的清单编码模式
  applicableFileTypes: FileType[];
  
  // 参数配置
  parameters: RuleParameter[];
  
  // 严重程度
  severity: 'error' | 'warning' | 'info';
  
  // 状态
  isEnabled: boolean;
  version: string;
}

// 必填特征配置
interface RequiredFeatureConfig {
  sboqCodePattern: string;         // 清单编码匹配模式
  itemName: string;                // 清单项名称
  requiredFeatures: {
    featureName: string;           // 特征名称
    featureKey: string;            // 特征键
    isRequired: boolean;           // 是否必填
    validValues?: string[];        // 有效值列表
    validRange?: { min: number; max: number };  // 有效范围
    format?: string;               // 格式要求（正则）
  }[];
}

// 关联规则配置
interface AssociationRule {
  ruleId: string;
  primaryItem: {
    sboqCodePattern: string;       // 主清单项编码模式
    itemName: string;              // 主清单项名称
  };
  associatedItems: {
    sboqCodePattern: string;       // 关联清单项编码模式
    itemName: string;              // 关联清单项名称
    necessity: 'required' | 'conditional' | 'optional';  // 必要性
    condition?: string;            // 条件（conditional时）
    coefficient?: { min: number; max: number };  // 关联系数
  }[];
}
```

### 7.2 规则配置示例

**必填特征规则**

```json
{
  "sboqCodePattern": "010501004.*",
  "itemName": "矩形柱",
  "requiredFeatures": [
    {
      "featureName": "混凝土强度等级",
      "featureKey": "concreteStrength",
      "isRequired": true,
      "validValues": ["C15", "C20", "C25", "C30", "C35", "C40", "C45", "C50", "C55", "C60"]
    },
    {
      "featureName": "截面尺寸",
      "featureKey": "sectionSize",
      "isRequired": true,
      "format": "^\\d+×\\d+$"
    },
    {
      "featureName": "柱高",
      "featureKey": "columnHeight",
      "isRequired": true,
      "validRange": { "min": 2.5, "max": 20 }
    }
  ]
}
```

**关联规则**

```json
{
  "ruleId": "ASC-001",
  "primaryItem": {
    "sboqCodePattern": "010501.*",
    "itemName": "现浇混凝土柱"
  },
  "associatedItems": [
    {
      "sboqCodePattern": "010514001.*",
      "itemName": "柱模板",
      "necessity": "required",
      "coefficient": { "min": 6, "max": 10 }
    },
    {
      "sboqCodePattern": "010416.*",
      "itemName": "柱钢筋",
      "necessity": "required",
      "coefficient": { "min": 0.1, "max": 0.15 }
    }
  ]
}
```

### 7.3 规则汇总

| 类别 | 规则数量 | 严重级别分布 |
|------|:--------:|-------------|
| 特征缺失检查 | 6条 | 🔴×3 🟡×1 🔵×2 |
| 特征矛盾检查 | 8条 | 🔴×4 🟡×4 🔵×0 |
| 清单漏项检查 | 11条 | 🔴×2 🟡×7 🔵×2 |
| 工程量异常检查 | 8条 | 🔴×2 🟡×4 🔵×2 |
| **合计** | **33条** | 🔴×11 🟡×16 🔵×6 |

---

## 8. Issue 生成

### 8.1 Issue 模板

**特征缺失Issue**

```json
{
  "title": "必填特征缺失",
  "description": "清单项【{清单名称}】缺少必填特征：{缺失特征列表}",
  "suggestion": "请补充以下特征：{缺失特征及格式要求}",
  "locationType": "item",
  "locationPath": "{分部}/{分项}/{清单项名称}",
  "lineNumber": "{行号}",
  "actualValue": "缺失",
  "expectedValue": "{特征名称}（必填）",
  "metadata": {
    "sboqCode": "{SBoQCode}",
    "missingFeatures": ["{特征1}", "{特征2}"],
    "existingFeatures": ["{已有特征列表}"]
  }
}
```

**特征矛盾Issue**

```json
{
  "title": "{矛盾类型}",
  "description": "清单项【{清单名称}】{矛盾描述}",
  "suggestion": "{修改建议}",
  "locationType": "item",
  "locationPath": "{分部}/{分项}/{清单项名称}",
  "lineNumber": "{行号}",
  "actualValue": "{实际值}",
  "expectedValue": "{期望值}",
  "metadata": {
    "sboqCode": "{SBoQCode}",
    "conflictType": "{矛盾类型}",
    "conflictDetails": {
      "source1": { "field": "{字段1}", "value": "{值1}" },
      "source2": { "field": "{字段2}", "value": "{值2}" }
    }
  }
}
```

**清单漏项Issue**

```json
{
  "title": "清单漏项：{漏项名称}",
  "description": "存在【{主清单项}】但缺少关联的【{漏项名称}】",
  "suggestion": "请补充{漏项名称}，预估工程量约{估算量}{单位}",
  "locationType": "division",
  "locationPath": "{分部}",
  "lineNumber": null,
  "actualValue": "缺失",
  "expectedValue": "{漏项名称}",
  "metadata": {
    "primaryItem": {
      "name": "{主清单项}",
      "sboqCode": "{主编码}",
      "quantity": "{主工程量}"
    },
    "missingItem": {
      "name": "{漏项名称}",
      "sboqCodePattern": "{漏项编码}",
      "estimatedQuantity": "{估算量}",
      "coefficient": "{关联系数}"
    }
  }
}
```

**工程量异常Issue**

```json
{
  "title": "工程量{异常类型}",
  "description": "清单项【{清单名称}】工程量{实际值}{单位}，{异常描述}",
  "suggestion": "{修改建议}",
  "locationType": "item",
  "locationPath": "{分部}/{分项}/{清单项名称}",
  "lineNumber": "{行号}",
  "actualValue": "{实际值}",
  "expectedValue": "{期望范围}",
  "metadata": {
    "sboqCode": "{SBoQCode}",
    "unit": "{单位}",
    "abnormalType": "{异常类型}",
    "validRange": { "min": "{最小值}", "max": "{最大值}" }
  }
}
```

### 8.2 Issue 示例

**特征缺失示例**

```json
{
  "title": "必填特征缺失",
  "description": "清单项【矩形柱】缺少必填特征：截面尺寸、柱高",
  "suggestion": "请补充以下特征：\n1. 截面尺寸（格式如：400×400）\n2. 柱高（单位：m）",
  "locationType": "item",
  "locationPath": "土建工程/混凝土工程/矩形柱",
  "lineNumber": 35,
  "actualValue": "缺失",
  "expectedValue": "截面尺寸、柱高（必填）",
  "metadata": {
    "sboqCode": "010501004001",
    "missingFeatures": ["截面尺寸", "柱高"],
    "existingFeatures": ["混凝土强度等级: C30"]
  }
}
```

**特征矛盾示例**

```json
{
  "title": "名称与特征强度等级矛盾",
  "description": "清单项【C30矩形柱】名称中标注C30，但特征中填写C40",
  "suggestion": "请核实混凝土强度等级，统一名称和特征描述",
  "locationType": "item",
  "locationPath": "土建工程/混凝土工程/C30矩形柱",
  "lineNumber": 35,
  "actualValue": "名称C30，特征C40",
  "expectedValue": "名称与特征一致",
  "metadata": {
    "sboqCode": "010501004001",
    "conflictType": "名称-特征矛盾",
    "conflictDetails": {
      "source1": { "field": "项目名称", "value": "C30" },
      "source2": { "field": "混凝土强度等级", "value": "C40" }
    }
  }
}
```

**清单漏项示例**

```json
{
  "title": "清单漏项：柱模板",
  "description": "存在【矩形柱混凝土 125.6m³】但缺少关联的【柱模板】",
  "suggestion": "请补充柱模板，预估工程量约880~1256m²（按系数7-10计算）",
  "locationType": "division",
  "locationPath": "土建工程/混凝土工程",
  "lineNumber": null,
  "actualValue": "缺失",
  "expectedValue": "柱模板",
  "metadata": {
    "primaryItem": {
      "name": "矩形柱混凝土",
      "sboqCode": "010501004001",
      "quantity": "125.6 m³"
    },
    "missingItem": {
      "name": "柱模板",
      "sboqCodePattern": "010514001.*",
      "estimatedQuantity": "880~1256",
      "coefficient": "7~10 m²/m³"
    }
  }
}
```

**工程量异常示例**

```json
{
  "title": "工程量为零",
  "description": "清单项【矩形柱C30】工程量为0m³，但综合单价为580元/m³",
  "suggestion": "请核实工程量，若该项不存在请删除清单项",
  "locationType": "item",
  "locationPath": "土建工程/混凝土工程/矩形柱C30",
  "lineNumber": 35,
  "actualValue": "0",
  "expectedValue": ">0",
  "metadata": {
    "sboqCode": "010501004001",
    "unit": "m³",
    "abnormalType": "零值",
    "unitPrice": 580
  }
}
```

### 8.3 Issue 严重程度判定

| 问题类型 | 严重程度 | 判定依据 |
|----------|:--------:|----------|
| 关键必填特征缺失 | 🔴 严重 | 影响组价准确性 |
| 特征描述整体为空 | 🔴 严重 | 无法准确描述工程 |
| 名称与特征矛盾 | 🔴 严重 | 信息明显错误 |
| 编码与名称矛盾 | 🔴 严重 | 基础信息错误 |
| 特征与单位矛盾 | 🔴 严重 | 可能导致计价错误 |
| 模板/钢筋漏项 | 🔴 严重 | 重大工程量遗漏 |
| 工程量为零 | 🔴 严重 | 明显数据错误 |
| 工程量为负 | 🔴 严重 | 明显数据错误 |
| 次要特征缺失 | 🟡 一般 | 影响描述完整性 |
| 特征间逻辑矛盾 | 🟡 一般 | 需要核实 |
| 其他关联项漏项 | 🟡 一般 | 可能遗漏 |
| 工程量过大/过小 | 🟡 一般 | 可能录入错误 |
| 关联比例异常 | 🟡 一般 | 需要核实 |
| 精度异常 | 🔵 提示 | 规范性问题 |
| 特征数量过少 | 🔵 提示 | 建议补充 |

---

## 9. 界面设计

### 9.1 检查结果展示

```
┌─ 清单缺陷检查结果 ───────────────────────────────────────────────────────┐
│                                                                          │
│  检查概况                                                                │
│  ┌────────────────────────────────────────────────────────────────────┐ │
│  │                                                                    │ │
│  │   清单项总数    检查清单     问题清单     问题分布                  │ │
│  │   ┌─────┐      ┌─────┐      ┌─────┐     ┌─────────────────────┐   │ │
│  │   │ 186 │      │ 186 │      │  28 │     │ 🔴 严重   11 (39%)  │   │ │
│  │   │  项 │      │  项 │      │  项 │     │ 🟡 一般   13 (47%)  │   │ │
│  │   └─────┘      └─────┘      └─────┘     │ 🔵 提示    4 (14%)  │   │ │
│  │                                          └─────────────────────┘   │ │
│  │                                                                    │ │
│  └────────────────────────────────────────────────────────────────────┘ │
│                                                                          │
│  分类统计                                                                │
│  ┌────────────────────────────────────────────────────────────────────┐ │
│  │ 检查类型           检查数    问题数    通过率     操作               │ │
│  │ ─────────────────────────────────────────────────────────────────  │ │
│  │ 特征缺失检查         186         8       96%      [查看详情]         │ │
│  │ 特征矛盾检查         186         5       97%      [查看详情]         │ │
│  │ 清单漏项检查         186         9       95%      [查看详情]         │ │
│  │ 工程量异常检查       186         6       97%      [查看详情]         │ │
│  └────────────────────────────────────────────────────────────────────┘ │
│                                                                          │
│  问题清单                   [全部] [缺失] [矛盾] [漏项] [工程量]         │
│  ┌────────┬─────────────────────────────────┬─────────┬───────────────┐ │
│  │ 级别   │ 问题描述                         │ 类型    │ 操作          │ │
│  ├────────┼─────────────────────────────────┼─────────┼───────────────┤ │
│  │ 🔴严重 │ 矩形柱缺少必填特征：截面尺寸     │ 特征缺失│ [定位] [处理] │ │
│  │        │ 柱高                             │         │               │ │
│  ├────────┼─────────────────────────────────┼─────────┼───────────────┤ │
│  │ 🔴严重 │ C30矩形柱 名称与特征强度矛盾     │ 特征矛盾│ [定位] [处理] │ │
│  │        │ 名称C30，特征C40                 │         │               │ │
│  ├────────┼─────────────────────────────────┼─────────┼───────────────┤ │
│  │ 🔴严重 │ 有混凝土柱125.6m³无柱模板       │ 清单漏项│ [定位] [处理] │ │
│  │        │ 预估漏项约880~1256m²             │         │               │ │
│  ├────────┼─────────────────────────────────┼─────────┼───────────────┤ │
│  │ 🔴严重 │ 现浇板工程量为0                  │ 工程量  │ [定位] [处理] │ │
│  │        │ 单价580元/m³，合价0元            │         │               │ │
│  ├────────┼─────────────────────────────────┼─────────┼───────────────┤ │
│  │ 🟡一般 │ 砖墙缺少砂浆种类特征             │ 特征缺失│ [定位] [处理] │ │
│  └────────┴─────────────────────────────────┴─────────┴───────────────┘ │
│                                                                          │
│                                    [导出报告]  [批量处理]  [重新检查]    │
└──────────────────────────────────────────────────────────────────────────┘
```

### 9.2 漏项检查详情

```
┌─ 清单漏项检查详情 ───────────────────────────────────────────────────────┐
│                                                                          │
│  关联分析：混凝土工程                                                    │
│  ┌────────────────────────────────────────────────────────────────────┐ │
│  │                                                                    │ │
│  │  主清单项          工程量      关联项        状态      预估量      │ │
│  │  ──────────────────────────────────────────────────────────────── │ │
│  │  矩形柱C30         125.6m³                                         │ │
│  │                              ├─ 柱模板      ✗ 缺失   880~1256m²  │ │
│  │                              └─ 柱钢筋      ✓ 存在   15.2t       │ │
│  │  ──────────────────────────────────────────────────────────────── │ │
│  │  矩形梁C30         89.5m³                                          │ │
│  │                              ├─ 梁模板      ✓ 存在   520m²       │ │
│  │                              └─ 梁钢筋      ✓ 存在   12.8t       │ │
│  │  ──────────────────────────────────────────────────────────────── │ │
│  │  现浇板C30         256.8m³                                         │ │
│  │                              ├─ 板模板      ✓ 存在   285m²       │ │
│  │                              └─ 板钢筋      ✗ 缺失   20~31t      │ │
│  │                                                                    │ │
│  └────────────────────────────────────────────────────────────────────┘ │
│                                                                          │
│  漏项汇总                                                                │
│  ┌────────────────────────────────────────────────────────────────────┐ │
│  │ 漏项名称      关联主项        预估工程量        预估造价            │ │
│  │ ────────────────────────────────────────────────────────────────── │ │
│  │ 柱模板        矩形柱C30       880~1256m²       ≈4.4~6.3万元       │ │
│  │ 板钢筋        现浇板C30       20~31t           ≈9~14万元          │ │
│  │ ────────────────────────────────────────────────────────────────── │ │
│  │ 预估漏项总造价：                               ≈13.4~20.3万元     │ │
│  └────────────────────────────────────────────────────────────────────┘ │
│                                                                          │
│                                        [生成漏项清单]  [忽略此分析]      │
└──────────────────────────────────────────────────────────────────────────┘
```

---

## 10. API 接口

### 10.1 接口列表

| 接口名称 | 方法 | 路径 | 说明 |
|----------|------|------|------|
| 执行清单缺陷检查 | POST | `/api/qc/check/boq-defect` | 执行全部或指定类型的缺陷检查 |
| 获取检查结果 | GET | `/api/qc/check/boq-defect/{taskId}/result` | 获取清单缺陷检查结果 |
| 获取漏项分析 | GET | `/api/qc/check/boq-defect/{taskId}/omission-analysis` | 获取漏项关联分析 |
| 获取规则列表 | GET | `/api/qc/rules/boq-defect` | 获取清单缺陷检查规则列表 |
| 获取必填特征配置 | GET | `/api/qc/rules/required-features` | 获取必填特征规则配置 |
| 获取关联规则 | GET | `/api/qc/rules/association` | 获取清单关联规则 |

### 10.2 接口详情

**执行清单缺陷检查**

```
POST /api/qc/check/boq-defect

Request:
{
  "fileId": "file-001",
  "checkTypes": ["missing", "conflict", "omission", "quantity"]
}

Response:
{
  "code": 200,
  "data": {
    "taskId": "task-boq-001",
    "status": "completed",
    "statistics": {
      "totalItems": 186,
      "checkedItems": 186,
      "issueCount": 28,
      "errorCount": 11,
      "warningCount": 13,
      "infoCount": 4
    },
    "checkTypeStats": [
      { "type": "missing", "checked": 186, "issues": 8, "passRate": 0.96 },
      { "type": "conflict", "checked": 186, "issues": 5, "passRate": 0.97 },
      { "type": "omission", "checked": 186, "issues": 9, "passRate": 0.95 },
      { "type": "quantity", "checked": 186, "issues": 6, "passRate": 0.97 }
    ],
    "issues": [...]
  }
}
```

**获取漏项分析**

```
GET /api/qc/check/boq-defect/{taskId}/omission-analysis

Response:
{
  "code": 200,
  "data": {
    "divisions": [
      {
        "divisionName": "混凝土工程",
        "primaryItems": [
          {
            "itemName": "矩形柱C30",
            "sboqCode": "010501004001",
            "quantity": 125.6,
            "unit": "m³",
            "associatedItems": [
              {
                "itemName": "柱模板",
                "status": "missing",
                "estimatedQuantity": { "min": 880, "max": 1256 },
                "unit": "m²",
                "coefficient": "7~10 m²/m³"
              },
              {
                "itemName": "柱钢筋",
                "status": "exists",
                "actualQuantity": 15.2,
                "unit": "t"
              }
            ]
          }
        ]
      }
    ],
    "summary": {
      "totalMissing": 2,
      "estimatedCost": { "min": 134000, "max": 203000 }
    }
  }
}
```

---

## 11. 版本历史

| 版本 | 日期 | 修订内容 | 作者 |
|------|------|----------|------|
| V1.0 | 2026-01-18 | 初稿，完成清单缺陷检查规格 | - |

---

## 附录 A：必填特征速查表

| 清单大类 | 清单项 | 必填特征 |
|----------|--------|----------|
| 混凝土工程 | 柱 | 强度等级、截面尺寸、柱高 |
| | 梁 | 强度等级、截面尺寸、梁类型 |
| | 板 | 强度等级、板厚、板类型 |
| | 基础 | 强度等级、基础类型 |
| | 墙 | 强度等级、墙厚 |
| 钢筋工程 | 钢筋 | 钢筋种类、规格、连接方式 |
| 砌筑工程 | 墙 | 墙体材料、墙厚、砂浆种类 |
| 门窗工程 | 门 | 门类型、规格尺寸、材质 |
| | 窗 | 窗类型、规格尺寸、材质、玻璃类型 |
| 防水工程 | 防水 | 防水材料、厚度/层数、部位 |
| 安装-给排水 | 管道 | 管材材质、公称直径、连接方式 |
| 安装-电气 | 电缆 | 电缆型号、截面积、敷设方式 |

---

## 附录 B：关联规则速查表

| 主清单项 | 必须关联项 | 条件关联项 |
|----------|-----------|-----------|
| 现浇混凝土柱 | 柱模板、柱钢筋 | - |
| 现浇混凝土梁 | 梁模板、梁钢筋 | - |
| 现浇混凝土板 | 板模板、板钢筋 | 找平层（视设计） |
| 现浇混凝土基础 | 基础钢筋、垫层 | 基础模板（视类型） |
| 填充墙 | 拉结筋 | 构造柱（视规范） |
| 门/窗 | 框塞缝 | 门套/窗台（视设计） |
| 屋面防水 | 保护层、找平层 | 找坡层（视构造） |
| 给水管道 | 阀门、试压 | 支架（明装）、保温 |
| 排水管道 | 检查口/清扫口 | 地漏（卫生间） |

---

## 附录 C：相关文档索引

| 文档名称 | 路径 | 说明 |
|----------|------|------|
| 质控模块总览 | 00_QC_Overview_Spec.md | 上级文档 |
| 综合单价检查 | 03_Composite_Price_Check_Spec.md | 前一检查类型 |
| 指标合理性检查 | 05_Index_Rationality_Check_Spec.md | 下一检查类型 |
| 标准清单库 | 02_Standard_Library/SBoQ_Spec.md | 清单标准化依赖 |
| 合规性检查 | 01_Compliance_Check_Spec.md | 编码/单位/特征规范依赖 |