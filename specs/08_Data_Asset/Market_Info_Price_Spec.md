# 信息价功能规格说明书

> 文档编号：04-DA-005  
> 版本：V1.0  
> 创建日期：2026-01-18  
> 所属模块：04_Data_Asset / 数据商城

---

## 1. 功能概述

### 1.1 功能定位

信息价是数据商城的核心数据源，汇聚全国各地造价管理站发布的官方材料指导价格，为用户提供权威、及时的材料价格参考，是计价、估算、质控等业务模块的重要数据支撑。

```
┌─────────────────────────────────────────────────────────────────────────┐
│                            信息价定位                                    │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│   外部数据源                                                             │
│   ┌─────────────────────────────────────────────────────────────────┐   │
│   │  各地造价管理站                                                   │   │
│   │  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐   │   │
│   │  │广东造价站│ │深圳造价站│ │上海造价站│ │北京造价站│ │  ...    │   │   │
│   │  └────┬────┘ └────┬────┘ └────┬────┘ └────┬────┘ └────┬────┘   │   │
│   └───────┼──────────┼──────────┼──────────┼──────────┼──────────┘   │
│           │          │          │          │          │              │
│           └──────────┴──────────┴──────────┴──────────┘              │
│                                    │                                  │
│                                    ▼ 平台采集/对接                     │
│                           ┌─────────────────┐                         │
│                           │   数据商城-信息价 │                         │
│                           │   (平台数据资产)  │                         │
│                           └────────┬────────┘                         │
│                                    │                                  │
│           ┌────────────────────────┼────────────────────────┐        │
│           │                        │                        │        │
│           ▼                        ▼                        ▼        │
│    ┌───────────┐            ┌───────────┐            ┌───────────┐   │
│    │  计价模块  │            │  质控模块  │            │  估算模块  │   │
│    │ (价格参考) │            │ (价格对标) │            │ (成本测算) │   │
│    └───────────┘            └───────────┘            └───────────┘   │
│                                                                       │
└─────────────────────────────────────────────────────────────────────────┘
```

### 1.2 信息价特点

```
┌─────────────────────────────────────────────────────────────────────────┐
│                          信息价特点说明                                  │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │  📋 权威性                                                       │   │
│  │  • 由各地造价管理站官方发布                                       │   │
│  │  • 作为工程计价的官方参考依据                                     │   │
│  │  • 财政评审、审计认可的价格标准                                   │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │  📅 周期性                                                       │   │
│  │  • 月度发布（多数地区）或季度发布                                 │   │
│  │  • 固定发布周期，可预期                                           │   │
│  │  • 历史数据完整，可追溯                                           │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │  🌍 地域性                                                       │   │
│  │  • 按省/市/区县分级发布                                           │   │
│  │  • 反映当地材料价格水平                                           │   │
│  │  • 不同地区可能存在分类差异                                       │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │  📊 标准化                                                       │   │
│  │  • 材料分类相对规范                                               │   │
│  │  • 规格型号描述标准化                                             │   │
│  │  • 价格类型明确（市场价/指导价）                                  │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### 1.3 核心价值

| 维度 | 说明 |
|------|------|
| **权威参考** | 官方发布的材料价格，具有法律效力和公信力 |
| **基准对标** | 作为企业材价的对标基准，识别价格偏差 |
| **计价支撑** | 为工程计价提供官方认可的价格依据 |
| **趋势分析** | 追踪材料价格变化趋势，预测市场走向 |
| **跨地区比价** | 支持不同地区信息价对比，辅助决策 |

### 1.4 与其他模块关系

```
┌─────────────────────────────────────────────────────────────────────────┐
│                          信息价与其他模块关系                            │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                         数据商城                                   │ │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐               │ │
│  │  │   信息价     │  │ 公共资源案例 │  │ 会员单位数据 │               │ │
│  │  │  (本文档)    │  │             │  │             │               │ │
│  │  └──────┬──────┘  └─────────────┘  └─────────────┘               │ │
│  └─────────┼─────────────────────────────────────────────────────────┘ │
│            │                                                           │
│            │ 价格对标/差异分析                                          │
│            ▼                                                           │
│  ┌───────────────────────────────────────────────────────────────────┐ │
│  │                          企业库                                    │ │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌──────────┐ │ │
│  │  │  企业材价库  │  │  企业综价库  │  │  企业案例库  │  │ 企业指标库│ │ │
│  │  │  (对标信息价)│  │             │  │             │  │          │ │ │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └──────────┘ │ │
│  └───────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│  关系说明：                                                              │
│  • 信息价作为企业材价的基准对标数据源                                    │
│  • 企业材价入库时自动关联对应信息价进行偏差计算                          │
│  • 质控模块使用信息价作为价格审核的参考基准                              │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 2. 功能架构

### 2.1 菜单结构

```
数据资产
├── 企业库
│   ├── 案例库
│   ├── 材价库
│   ├── 综价库
│   └── 指标库
└── 数据商城
    ├── 信息价        ← 本文档
    ├── 公共资源案例库
    └── 会员单位数据
```

### 2.2 功能模块

```
┌─────────────────────────────────────────────────────────────────────────┐
│                          信息价功能架构                                  │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                        信息价查询（主界面）                      │   │
│  ├─────────────────────────────────────────────────────────────────┤   │
│  │  筛选区：地区 | 材价期 | 材料分类 | 关键词                       │   │
│  │  数据源：[省级信息价] [市级信息价] [区县信息价]                   │   │
│  │  操作区：查看详情 | 价格趋势 | 导出 | 收藏                       │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                        信息价详情（详情页）                      │   │
│  ├─────────────────────────────────────────────────────────────────┤   │
│  │  材料信息：名称 | 规格型号 | 单位 | 材料分类                     │   │
│  │  价格信息：信息价 | 含税价 | 税率 | 价格类型                     │   │
│  │  发布信息：发布单位 | 发布期 | 有效期                            │   │
│  │  历史价格：价格走势 | 环比/同比                                  │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                        价格分析（分析页）                        │   │
│  ├─────────────────────────────────────────────────────────────────┤   │
│  │  趋势分析：价格走势 | 环比/同比 | 波动分析                       │   │
│  │  地区对比：跨地区价格对比 | 价差分析                             │   │
│  │  分类统计：按材料分类统计 | 涨跌排行                             │   │
│  │  预警提醒：价格异常波动预警 | 新增材料提醒                       │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                        订阅管理（订阅页）                        │   │
│  ├─────────────────────────────────────────────────────────────────┤   │
│  │  地区订阅：订阅地区信息价更新通知                                │   │
│  │  材料订阅：订阅特定材料价格变动通知                              │   │
│  │  预警设置：设置价格波动预警阈值                                  │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                        数据管理（管理后台）                      │   │
│  ├─────────────────────────────────────────────────────────────────┤   │
│  │  数据采集：采集任务 | 数据源配置 | 采集日志                      │   │
│  │  数据处理：数据清洗 | 标准化映射 | 质量检查                      │   │
│  │  数据发布：版本管理 | 发布审核 | 发布记录                        │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 3. 数据模型

### 3.1 核心实体关系

```
┌─────────────────────────────────────────────────────────────────────────┐
│                          信息价数据模型                                  │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  ┌───────────────────────────────────────────────────────────────┐     │
│  │              info_price_source（信息价数据源）                  │     │
│  ├───────────────────────────────────────────────────────────────┤     │
│  │  PK: source_id                                                │     │
│  │  数据源：名称 + 地区 + 发布周期 + 采集方式                       │     │
│  └───────────────────────────────────────────────────────────────┘     │
│                                    │                                    │
│                                    ▼                                    │
│  ┌───────────────────────────────────────────────────────────────┐     │
│  │              info_price_period（信息价期刊）                    │     │
│  ├───────────────────────────────────────────────────────────────┤     │
│  │  PK: period_id                                                │     │
│  │  期刊：期号 + 发布日期 + 有效期 + 材料数量                       │     │
│  └───────────────────────────────────────────────────────────────┘     │
│                                    │                                    │
│                                    ▼                                    │
│  ┌───────────────────────────────────────────────────────────────┐     │
│  │              info_price（信息价明细主表）                       │     │
│  ├───────────────────────────────────────────────────────────────┤     │
│  │  PK: info_price_id                                            │     │
│  │  FK: source_id, period_id                                     │     │
│  │  材料信息 + 价格信息 + 标准化映射                               │     │
│  └───────────────────────────────────────────────────────────────┘     │
│                                    │                                    │
│           ┌────────────────────────┼────────────────────────┐          │
│           │                        │                        │          │
│           ▼                        ▼                        ▼          │
│  ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐    │
│  │info_price_history│   │info_price_mapping│   │user_subscription │    │
│  │ （价格历史）      │    │ （标准化映射）   │    │ （用户订阅）     │    │
│  ├─────────────────┤    ├─────────────────┤    ├─────────────────┤    │
│  │ • 历史价格记录  │    │ • SMLCode映射   │    │ • 地区订阅      │    │
│  │ • 环比/同比    │    │ • 映射置信度    │    │ • 材料订阅      │    │
│  └─────────────────┘    └─────────────────┘    └─────────────────┘    │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### 3.2 信息价数据源表：info_price_source

| 字段名 | 类型 | 必填 | 说明 |
|--------|------|:----:|------|
| source_id | VARCHAR(32) | ✓ | 数据源ID，主键 |
| source_name | VARCHAR(100) | ✓ | 数据源名称（如：广东省造价站） |
| source_code | VARCHAR(20) | ✓ | 数据源编码，唯一 |
| **地区信息** ||||
| province_code | VARCHAR(10) | ✓ | 省份编码 |
| province_name | VARCHAR(50) | ✓ | 省份名称 |
| city_code | VARCHAR(10) |  | 城市编码（省级数据源为空） |
| city_name | VARCHAR(50) |  | 城市名称 |
| district_code | VARCHAR(10) |  | 区县编码（省/市级数据源为空） |
| district_name | VARCHAR(50) |  | 区县名称 |
| region_level | VARCHAR(10) | ✓ | 地区级别：province/city/district |
| **发布信息** ||||
| publish_org | VARCHAR(200) | ✓ | 发布单位 |
| publish_cycle | VARCHAR(20) | ✓ | 发布周期：monthly/quarterly/bimonthly |
| publish_day | INTEGER |  | 发布日（每月第几天） |
| **采集配置** ||||
| collect_method | VARCHAR(20) | ✓ | 采集方式：api/crawl/manual/file |
| collect_url | VARCHAR(500) |  | 采集地址 |
| collect_config | JSONB |  | 采集配置（API密钥、爬虫规则等） |
| **状态信息** ||||
| status | VARCHAR(20) | ✓ | 状态：active/inactive/pending |
| last_collect_time | TIMESTAMP |  | 最后采集时间 |
| last_publish_period | VARCHAR(20) |  | 最新发布期 |
| **审计字段** ||||
| created_at | TIMESTAMP | ✓ | 创建时间 |
| updated_at | TIMESTAMP | ✓ | 更新时间 |
| remark | TEXT |  | 备注 |

**发布周期说明：**

| publish_cycle | 说明 | 示例 |
|---------------|------|------|
| monthly | 月刊 | 每月发布一期 |
| bimonthly | 双月刊 | 每两月发布一期 |
| quarterly | 季刊 | 每季度发布一期 |

### 3.3 信息价期刊表：info_price_period

| 字段名 | 类型 | 必填 | 说明 |
|--------|------|:----:|------|
| period_id | VARCHAR(32) | ✓ | 期刊ID，主键 |
| source_id | VARCHAR(32) | ✓ | 数据源ID，外键 |
| **期刊信息** ||||
| period_code | VARCHAR(20) | ✓ | 期号，格式：YYYY-MM或YYYY-QN |
| period_name | VARCHAR(100) | ✓ | 期刊名称（如：2025年6月材料信息价） |
| period_year | INTEGER | ✓ | 年份 |
| period_month | INTEGER |  | 月份（季刊为空） |
| period_quarter | INTEGER |  | 季度（月刊为空） |
| **有效期** ||||
| effective_date | DATE | ✓ | 生效日期 |
| expire_date | DATE |  | 失效日期 |
| **统计信息** ||||
| material_count | INTEGER | ✓ | 材料数量 |
| category_count | INTEGER |  | 分类数量 |
| new_material_count | INTEGER |  | 新增材料数量 |
| updated_count | INTEGER |  | 价格更新数量 |
| **发布信息** ||||
| publish_date | DATE | ✓ | 发布日期 |
| publish_doc_url | VARCHAR(500) |  | 原文链接 |
| **处理状态** ||||
| process_status | VARCHAR(20) | ✓ | 处理状态：pending/processing/completed/error |
| process_time | TIMESTAMP |  | 处理完成时间 |
| process_remark | TEXT |  | 处理备注 |
| **审计字段** ||||
| created_at | TIMESTAMP | ✓ | 创建时间 |
| updated_at | TIMESTAMP | ✓ | 更新时间 |

### 3.4 信息价明细表：info_price

| 字段名 | 类型 | 必填 | 说明 |
|--------|------|:----:|------|
| info_price_id | VARCHAR(32) | ✓ | 信息价ID，主键 |
| source_id | VARCHAR(32) | ✓ | 数据源ID，外键 |
| period_id | VARCHAR(32) | ✓ | 期刊ID，外键 |
| **材料基本信息** ||||
| material_code | VARCHAR(50) |  | 原始材料编码（数据源编码） |
| material_name | VARCHAR(200) | ✓ | 材料名称 |
| specification | VARCHAR(200) |  | 规格型号 |
| brand | VARCHAR(100) |  | 品牌（如有） |
| unit | VARCHAR(20) | ✓ | 计量单位 |
| **材料分类** ||||
| category_l1 | VARCHAR(50) | ✓ | 大类（数据源分类） |
| category_l2 | VARCHAR(50) |  | 中类 |
| category_l3 | VARCHAR(50) |  | 小类 |
| category_path | VARCHAR(200) |  | 分类路径 |
| **价格信息** ||||
| info_price | DECIMAL(18,4) | ✓ | 信息价（不含税） |
| tax_rate | DECIMAL(5,2) |  | 税率（%） |
| tax_inclusive_price | DECIMAL(18,4) |  | 含税价 |
| price_type | VARCHAR(20) | ✓ | 价格类型：guide/market/range |
| price_low | DECIMAL(18,4) |  | 价格下限（区间价时） |
| price_high | DECIMAL(18,4) |  | 价格上限（区间价时） |
| **地区信息** ||||
| province_code | VARCHAR(10) | ✓ | 省份编码 |
| city_code | VARCHAR(10) |  | 城市编码 |
| district_code | VARCHAR(10) |  | 区县编码 |
| apply_region | VARCHAR(200) |  | 适用地区说明 |
| **时间维度** ||||
| price_period | VARCHAR(20) | ✓ | 材价期，格式：YYYY-MM |
| effective_date | DATE | ✓ | 生效日期 |
| expire_date | DATE |  | 失效日期 |
| **标准化映射** ||||
| sml_code | VARCHAR(50) |  | 标准材料编码（映射结果） |
| mapping_confidence | DECIMAL(3,2) |  | 映射置信度（0-1） |
| mapping_status | VARCHAR(20) | ✓ | 映射状态：auto/manual/unmapped |
| **变动信息** ||||
| last_period_price | DECIMAL(18,4) |  | 上期价格 |
| mom_change | DECIMAL(5,2) |  | 环比变化（%） |
| yoy_change | DECIMAL(5,2) |  | 同比变化（%） |
| change_flag | VARCHAR(20) |  | 变动标识：up/down/unchanged/new |
| **状态管理** ||||
| status | VARCHAR(20) | ✓ | 状态：active/inactive |
| **审计字段** ||||
| created_at | TIMESTAMP | ✓ | 创建时间 |
| updated_at | TIMESTAMP | ✓ | 更新时间 |

**价格类型说明：**

| price_type | 说明 | 价格字段使用 |
|------------|------|--------------|
| guide | 指导价（固定值） | info_price |
| market | 市场价（固定值） | info_price |
| range | 区间价 | price_low, price_high |

### 3.5 信息价历史表：info_price_history

| 字段名 | 类型 | 必填 | 说明 |
|--------|------|:----:|------|
| history_id | VARCHAR(32) | ✓ | 历史ID，主键 |
| source_id | VARCHAR(32) | ✓ | 数据源ID |
| material_code | VARCHAR(50) |  | 原始材料编码 |
| material_name | VARCHAR(200) | ✓ | 材料名称 |
| specification | VARCHAR(200) |  | 规格型号 |
| unit | VARCHAR(20) | ✓ | 单位 |
| **价格信息** ||||
| info_price | DECIMAL(18,4) | ✓ | 信息价 |
| price_period | VARCHAR(20) | ✓ | 材价期 |
| **变动信息** ||||
| mom_change | DECIMAL(5,2) |  | 环比变化（%） |
| yoy_change | DECIMAL(5,2) |  | 同比变化（%） |
| created_at | TIMESTAMP | ✓ | 创建时间 |

### 3.6 标准化映射表：info_price_mapping

| 字段名 | 类型 | 必填 | 说明 |
|--------|------|:----:|------|
| mapping_id | VARCHAR(32) | ✓ | 映射ID，主键 |
| source_id | VARCHAR(32) | ✓ | 数据源ID |
| **原始信息** ||||
| original_name | VARCHAR(200) | ✓ | 原始材料名称 |
| original_spec | VARCHAR(200) |  | 原始规格型号 |
| original_unit | VARCHAR(20) | ✓ | 原始单位 |
| original_category | VARCHAR(200) |  | 原始分类 |
| **映射结果** ||||
| sml_code | VARCHAR(50) | ✓ | 标准材料编码 |
| sml_name | VARCHAR(200) | ✓ | 标准材料名称 |
| unit_conversion | DECIMAL(10,4) |  | 单位换算系数 |
| **映射信息** ||||
| mapping_type | VARCHAR(20) | ✓ | 映射类型：auto/manual |
| confidence | DECIMAL(3,2) | ✓ | 置信度（0-1） |
| mapping_rule | VARCHAR(200) |  | 映射规则说明 |
| **审核信息** ||||
| is_verified | BOOLEAN | ✓ | 是否已审核，默认false |
| verified_by | VARCHAR(32) |  | 审核人 |
| verified_at | TIMESTAMP |  | 审核时间 |
| **审计字段** ||||
| created_at | TIMESTAMP | ✓ | 创建时间 |
| updated_at | TIMESTAMP | ✓ | 更新时间 |

### 3.7 用户订阅表：info_price_subscription

| 字段名 | 类型 | 必填 | 说明 |
|--------|------|:----:|------|
| subscription_id | VARCHAR(32) | ✓ | 订阅ID，主键 |
| user_id | VARCHAR(32) | ✓ | 用户ID |
| enterprise_id | VARCHAR(32) | ✓ | 企业ID |
| **订阅类型** ||||
| subscription_type | VARCHAR(20) | ✓ | 订阅类型：region/material/category |
| **订阅内容** ||||
| source_id | VARCHAR(32) |  | 数据源ID（地区订阅时） |
| sml_code | VARCHAR(50) |  | 标准材料编码（材料订阅时） |
| category_code | VARCHAR(50) |  | 分类编码（分类订阅时） |
| **预警设置** ||||
| alert_threshold | DECIMAL(5,2) |  | 预警阈值（%） |
| alert_enabled | BOOLEAN | ✓ | 是否启用预警，默认true |
| **通知设置** ||||
| notify_on_publish | BOOLEAN | ✓ | 发布时通知，默认true |
| notify_on_change | BOOLEAN | ✓ | 价格变动时通知，默认true |
| notify_channel | VARCHAR(50) | ✓ | 通知渠道：app/email/sms |
| **状态管理** ||||
| status | VARCHAR(20) | ✓ | 状态：active/inactive |
| created_at | TIMESTAMP | ✓ | 创建时间 |
| updated_at | TIMESTAMP | ✓ | 更新时间 |

---

## 4. 界面设计

### 4.1 信息价查询主界面

```
┌─────────────────────────────────────────────────────────────────────────┐
│  📊 数据资产 > 数据商城 > 信息价                                  🔔 👤  │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │  📋 查询条件                                          [重置] [收起] │
│  ├─────────────────────────────────────────────────────────────────┤   │
│  │                                                                 │   │
│  │  数据源     [● 省级] [○ 市级] [○ 区县级]                         │   │
│  │                                                                 │   │
│  │  省份       [广东省         ▼]    城市       [深圳市      ▼]     │   │
│  │                                                                 │   │
│  │  材价期     [2025年6月      ▼]    材料分类   [钢材        ▼]     │   │
│  │                                                                 │   │
│  │  关键词     [                          ]    🔍                   │   │
│  │                                                                 │   │
│  │  快捷筛选   [本月最新] [价格上涨] [价格下降] [新增材料]           │   │
│  │                                                                 │   │
│  │                                    [🔍 查询]  [📊 分析]  [📥 导出] │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │  当前数据源：广东省造价站 | 2025年6月 | 共12,580条               │   │
│  │  发布日期：2025-06-05 | 有效期：2025-06-01至2025-06-30           │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │  统计概览                                                        │   │
│  │  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐   │   │
│  │  │ 材料总数 │ │ 价格上涨 │ │ 价格下降 │ │ 价格不变 │ │ 新增材料 │   │   │
│  │  │ 12,580  │ │  1,286  │ │   856   │ │ 10,350  │ │   88    │   │   │
│  │  │         │ │  10.2%  │ │   6.8%  │ │  82.3%  │ │   0.7%  │   │   │
│  │  │         │ │ ↑ 红色   │ │ ↓ 绿色   │ │ - 灰色  │ │ ★ 蓝色  │   │   │
│  │  └─────────┘ └─────────┘ └─────────┘ └─────────┘ └─────────┘   │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │  信息价列表                                                      │   │
│  ├────────┬────────────────┬────────┬────────┬────────┬───────────┤   │
│  │ 变动   │ 材料名称/规格   │ 信息价  │ 环比    │ 分类    │ 操作     │   │
│  ├────────┼────────────────┼────────┼────────┼────────┼───────────┤   │
│  │ ↑ 上涨 │ 钢筋            │ ¥4,180 │ +2.5%  │ 钢材    │ 详情 订阅 │   │
│  │        │ HRB400 Φ12 9m  │ /吨    │ 同+5.2%│ > 钢筋  │ 趋势 ☆   │   │
│  ├────────┼────────────────┼────────┼────────┼────────┼───────────┤   │
│  │ ↓ 下降 │ 商品混凝土      │ ¥478   │ -1.2%  │ 混凝土  │ 详情 订阅 │   │
│  │        │ C30 泵送       │ /m³    │ 同+3.5%│ > 商混  │ 趋势 ★   │   │
│  ├────────┼────────────────┼────────┼────────┼────────┼───────────┤   │
│  │ - 不变 │ 普通硅酸盐水泥   │ ¥515   │ 0%     │ 水泥    │ 详情 订阅 │   │
│  │        │ P.O42.5 袋装   │ /吨    │ 同+2.8%│ > 硅酸盐│ 趋势 ☆   │   │
│  ├────────┼────────────────┼────────┼────────┼────────┼───────────┤   │
│  │ ★ 新增 │ 预制叠合板      │ ¥380   │ -      │ 预制构件│ 详情 订阅 │   │
│  │        │ 120mm厚        │ /㎡    │        │ > 叠合板│ 趋势 ☆   │   │
│  ├────────┴────────────────┴────────┴────────┴────────┴───────────┤   │
│  │                    < 1  2  3  ... 629 >      共12,580条 20条/页  │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### 4.2 信息价详情页

```
┌─────────────────────────────────────────────────────────────────────────┐
│  📊 数据资产 > 数据商城 > 信息价 > 钢筋 HRB400 Φ12                🔔 👤  │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │  钢筋 HRB400 Φ12 9m                                    ↑ +2.5%   │   │
│  │  广东省造价站 | 2025年6月                             [订阅] [导出]│   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │  [基本信息] [价格趋势] [地区对比] [关联企业材价]                   │   │
│  ├─────────────────────────────────────────────────────────────────┤   │
│  │                                                                 │   │
│  │  ┌───────────────────────────┐ ┌───────────────────────────┐   │   │
│  │  │ 材料信息                   │ │ 价格信息                   │   │   │
│  │  ├───────────────────────────┤ ├───────────────────────────┤   │   │
│  │  │ 材料名称：钢筋             │ │ 信息价：¥4,180/吨         │   │   │
│  │  │ 规格型号：HRB400 Φ12 9m   │ │ 税率：13%                │   │   │
│  │  │ 计量单位：吨               │ │ 含税价：¥4,723.40/吨      │   │   │
│  │  │ 材料编码：GD-GC-001       │ │ 价格类型：指导价          │   │   │
│  │  │ 材料分类：钢材 > 钢筋      │ │                           │   │   │
│  │  └───────────────────────────┘ └───────────────────────────┘   │   │
│  │                                                                 │   │
│  │  ┌───────────────────────────┐ ┌───────────────────────────┐   │   │
│  │  │ 发布信息                   │ │ 标准化映射                 │   │   │
│  │  ├───────────────────────────┤ ├───────────────────────────┤   │   │
│  │  │ 发布单位：广东省造价站     │ │ SML编码：SML-0401-001     │   │   │
│  │  │ 发布期刊：2025年6月        │ │ 映射状态：已映射(自动)     │   │   │
│  │  │ 发布日期：2025-06-05      │ │ 映射置信度：0.95          │   │   │
│  │  │ 有效期：2025-06-01至06-30 │ │                           │   │   │
│  │  │ 适用地区：广东省全省       │ │                           │   │   │
│  │  └───────────────────────────┘ └───────────────────────────┘   │   │
│  │                                                                 │   │
│  │  ┌───────────────────────────────────────────────────────────┐ │   │
│  │  │ 价格变动                                                   │ │   │
│  │  ├───────────────────────────────────────────────────────────┤ │   │
│  │  │ 环比（上月）：+2.5%（¥4,078 → ¥4,180）                    │ │   │
│  │  │ 同比（去年）：+5.2%（¥3,973 → ¥4,180）                    │ │   │
│  │  │ 近3月波动：+3.8%                                          │ │   │
│  │  │ 近12月波动：+5.2%                                         │ │   │
│  │  └───────────────────────────────────────────────────────────┘ │   │
│  │                                                                 │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### 4.3 价格趋势分析

```
┌─────────────────────────────────────────────────────────────────────────┐
│  [基本信息] [价格趋势] [地区对比] [关联企业材价]                         │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │  趋势条件                                                        │   │
│  │  时间范围：[2024-01 ] 至 [2025-06 ]              [更新图表]       │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │  价格趋势图：钢筋 HRB400 Φ12 | 广东省                            │   │
│  │                                                                 │   │
│  │  4,300 ┤                                              ●        │   │
│  │        │                                         ●              │   │
│  │  4,200 ┤                                    ●                   │   │
│  │        │                               ●                        │   │
│  │  4,100 ┤                          ●                             │   │
│  │        │                     ●                                  │   │
│  │  4,000 ┤               ●                                        │   │
│  │        │          ●                                             │   │
│  │  3,900 ┤     ●                                                  │   │
│  │        │●                                                       │   │
│  │  3,800 ┼────┬────┬────┬────┬────┬────┬────┬────┬────┬────┬──── │   │
│  │        24/1 24/3 24/5 24/7 24/9 24/11 25/1 25/3 25/5           │   │
│  │                                                                 │   │
│  │  ── 信息价   ─ ─ 移动平均(3月)                                  │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │  历史价格明细                                                    │   │
│  │  ┌───────────┬───────────┬───────────┬───────────┬───────────┐ │   │
│  │  │ 材价期     │ 信息价     │ 环比变化   │ 同比变化   │ 变动标识  │ │   │
│  │  ├───────────┼───────────┼───────────┼───────────┼───────────┤ │   │
│  │  │ 2025-06   │ ¥4,180    │ +2.5%     │ +5.2%     │ ↑ 上涨    │ │   │
│  │  │ 2025-05   │ ¥4,078    │ +1.2%     │ +4.8%     │ ↑ 上涨    │ │   │
│  │  │ 2025-04   │ ¥4,030    │ +0.8%     │ +3.5%     │ ↑ 上涨    │ │   │
│  │  │ 2025-03   │ ¥3,998    │ -0.5%     │ +2.8%     │ ↓ 下降    │ │   │
│  │  │ 2025-02   │ ¥4,018    │ +1.0%     │ +2.5%     │ ↑ 上涨    │ │   │
│  │  │ 2025-01   │ ¥3,978    │ +0.2%     │ +1.8%     │ ↑ 上涨    │ │   │
│  │  └───────────┴───────────┴───────────┴───────────┴───────────┘ │   │
│  │                                                                 │   │
│  │  趋势洞察：                                                      │   │
│  │  • 近12个月持续上涨趋势，累计涨幅5.2%                            │   │
│  │  • 近3个月涨幅加速，月均涨幅1.5%                                 │   │
│  │  • 预测下月价格：约¥4,260（±50）                                 │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### 4.4 地区对比分析

```
┌─────────────────────────────────────────────────────────────────────────┐
│  [基本信息] [价格趋势] [地区对比] [关联企业材价]                         │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │  对比条件                                                        │   │
│  │  材料：钢筋 HRB400 Φ12    材价期：2025-06                        │   │
│  │  对比地区：[☑广东 ☑广西 ☑湖南 ☑湖北 ☑福建]           [更新对比]   │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │  跨省价格对比：钢筋 HRB400 Φ12 | 2025-06                         │   │
│  │  基准：广东省 ¥4,180/吨                                          │   │
│  ├─────────────────────────────────────────────────────────────────┤   │
│  │                                                                 │   │
│  │  ┌────────────────────────────────────────────────────────────┐│   │
│  │  │  地区价格排名                                               ││   │
│  │  │  ┌────────────┬────────┬────────┬────────┬────────────────┐││   │
│  │  │  │ 地区        │ 信息价  │ 偏差    │ 环比    │ 数据源        │││   │
│  │  │  ├────────────┼────────┼────────┼────────┼────────────────┤││   │
│  │  │  │ 福建省      │ ¥4,280 │ +2.4%  │ +1.8%  │ 福建省造价站   │││   │
│  │  │  │ 广东省      │ ¥4,180 │ 基准    │ +2.5%  │ 广东省造价站   │││   │
│  │  │  │ 湖南省      │ ¥4,050 │ -3.1%  │ +1.5%  │ 湖南省造价站   │││   │
│  │  │  │ 湖北省      │ ¥3,980 │ -4.8%  │ +2.0%  │ 湖北省造价站   │││   │
│  │  │  │ 广西壮族    │ ¥3,920 │ -6.2%  │ +1.2%  │ 广西壮族造价站 │││   │
│  │  │  └────────────┴────────┴────────┴────────┴────────────────┘││   │
│  │  └────────────────────────────────────────────────────────────┘│   │
│  │                                                                 │   │
│  │  ┌────────────────────────────────────────────────────────────┐│   │
│  │  │  价格柱状图                                                 ││   │
│  │  │                                                            ││   │
│  │  │   4,300 ┤ ████                                             ││   │
│  │  │         │ ████ ████                                        ││   │
│  │  │   4,100 ┤ ████ ████ ████                                   ││   │
│  │  │         │ ████ ████ ████ ████                              ││   │
│  │  │   3,900 ┤ ████ ████ ████ ████ ████                         ││   │
│  │  │         │ ████ ████ ████ ████ ████                         ││   │
│  │  │   3,700 ┼──────────────────────────                        ││   │
│  │  │         福建  广东  湖南  湖北  广西                         ││   │
│  │  │                                                            ││   │
│  │  │  ─── 各省信息价   ─ ─ 平均价(¥4,082)                        ││   │
│  │  └────────────────────────────────────────────────────────────┘│   │
│  │                                                                 │   │
│  │  分析结论：                                                      │   │
│  │  • 华南地区（广东、福建）价格较高，高于平均2-5%                   │   │
│  │  • 中部地区（湖南、湖北）价格适中，接近或略低于平均                │   │
│  │  • 西南地区（广西）价格最低，低于平均约6%                        │   │
│  │                                                                 │   │
│  │                                              [导出对比报告]     │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### 4.5 订阅管理

```
┌─────────────────────────────────────────────────────────────────────────┐
│  📊 数据资产 > 数据商城 > 信息价 > 我的订阅                       🔔 👤  │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │  订阅统计                                                        │   │
│  │  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐               │   │
│  │  │ 地区订阅 │ │ 材料订阅 │ │ 分类订阅 │ │ 预警开启 │               │   │
│  │  │    5    │ │   28    │ │    3    │ │   32    │               │   │
│  │  └─────────┘ └─────────┘ └─────────┘ └─────────┘               │   │
│  │                                               [+ 新增订阅]       │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │  地区订阅                                                        │   │
│  ├──────────────────────┬────────────┬────────────┬────────────────┤   │
│  │ 数据源                │ 最新期刊    │ 预警阈值    │ 操作          │   │
│  ├──────────────────────┼────────────┼────────────┼────────────────┤   │
│  │ 广东省造价站          │ 2025年6月  │ ±5%        │ 编辑 取消订阅  │   │
│  │ 省级 | 月刊           │ 12,580条   │ ✓ 已开启   │               │   │
│  ├──────────────────────┼────────────┼────────────┼────────────────┤   │
│  │ 深圳市造价站          │ 2025年6月  │ ±5%        │ 编辑 取消订阅  │   │
│  │ 市级 | 月刊           │ 8,650条    │ ✓ 已开启   │               │   │
│  └──────────────────────┴────────────┴────────────┴────────────────┘   │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │  材料订阅                                                        │   │
│  ├──────────────────────┬────────────┬────────────┬────────────────┤   │
│  │ 材料                  │ 当前价格    │ 预警阈值    │ 操作          │   │
│  ├──────────────────────┼────────────┼────────────┼────────────────┤   │
│  │ 钢筋 HRB400 Φ12      │ ¥4,180/吨  │ ±3%        │ 编辑 取消订阅  │   │
│  │ SML-0401-001         │ ↑ +2.5%    │ ✓ 已开启   │               │   │
│  ├──────────────────────┼────────────┼────────────┼────────────────┤   │
│  │ 商品混凝土 C30       │ ¥478/m³    │ ±5%        │ 编辑 取消订阅  │   │
│  │ SML-0201-003         │ ↓ -1.2%    │ ✓ 已开启   │               │   │
│  ├──────────────────────┼────────────┼────────────┼────────────────┤   │
│  │ 普通硅酸盐水泥 P.O42.5│ ¥515/吨    │ ±5%        │ 编辑 取消订阅  │   │
│  │ SML-0101-002         │ - 0%       │ ✓ 已开启   │               │   │
│  └──────────────────────┴────────────┴────────────┴────────────────┘   │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │  最近预警                                                        │   │
│  ├──────────────────────────────────────────────────────────────────┤   │
│  │  🔔 2025-06-05 钢筋HRB400Φ12 广东省信息价上涨2.5%，触发预警      │   │
│  │  🔔 2025-06-05 广东省造价站发布2025年6月信息价，共12,580条        │   │
│  │  🔔 2025-05-06 商品混凝土C30 广东省信息价下降1.5%，触发预警       │   │
│  └──────────────────────────────────────────────────────────────────┘   │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 5. 业务规则

### 5.1 数据采集规则

| 规则编号 | 规则名称 | 规则说明 |
|----------|----------|----------|
| IP-001 | 采集周期 | 按数据源配置的发布周期自动采集 |
| IP-002 | 采集验证 | 采集数据需验证完整性和格式正确性 |
| IP-003 | 重复检测 | 同一数据源同一期刊不可重复采集 |
| IP-004 | 数据清洗 | 自动清洗异常数据（空值、异常符号等） |
| IP-005 | 采集日志 | 记录每次采集的详细日志 |

### 5.2 标准化映射规则

| 规则编号 | 规则名称 | 规则说明 |
|----------|----------|----------|
| IP-101 | 自动映射 | 基于材料名称+规格+单位自动匹配SMLCode |
| IP-102 | 映射置信度 | 置信度≥0.8视为高置信，0.5-0.8中置信，<0.5低置信 |
| IP-103 | 低置信审核 | 低置信度映射需人工审核确认 |
| IP-104 | 单位换算 | 不同单位需记录换算系数 |
| IP-105 | 映射复用 | 已审核的映射关系可复用到后续期刊 |

### 5.3 价格变动计算规则

| 规则编号 | 规则名称 | 规则说明 |
|----------|----------|----------|
| IP-201 | 环比计算 | 环比 = (本期价格 - 上期价格) / 上期价格 × 100% |
| IP-202 | 同比计算 | 同比 = (本期价格 - 去年同期价格) / 去年同期价格 × 100% |
| IP-203 | 变动标识 | 涨≥0.5%标记up，降≤-0.5%标记down，其他unchanged |
| IP-204 | 新增标识 | 首次出现的材料标记为new |
| IP-205 | 历史记录 | 每期价格自动记录到历史表 |

### 5.4 订阅预警规则

| 规则编号 | 规则名称 | 规则说明 |
|----------|----------|----------|
| IP-301 | 发布通知 | 新期刊发布时通知订阅该地区的用户 |
| IP-302 | 变动预警 | 价格变动超过用户设置的阈值时预警 |
| IP-303 | 通知渠道 | 支持APP推送、邮件、短信三种渠道 |
| IP-304 | 通知频率 | 同一材料同一天最多通知一次 |
| IP-305 | 预警汇总 | 每日汇总预警信息发送日报 |

### 5.5 数据有效期规则

| 规则编号 | 规则名称 | 规则说明 |
|----------|----------|----------|
| IP-401 | 默认有效期 | 月刊默认有效期为当月，季刊为当季 |
| IP-402 | 延续有效 | 新期刊发布前，旧期刊继续有效 |
| IP-403 | 历史可查 | 过期数据仍可查询，但标记为历史数据 |
| IP-404 | 最新标识 | 同一数据源最新期刊标记为current |

---

## 6. 接口设计

### 6.1 接口清单

| 接口编号 | 接口名称 | 方法 | 路径 |
|----------|----------|------|------|
| IP-API-001 | 数据源列表 | GET | /api/v1/market/info-prices/sources |
| IP-API-002 | 期刊列表 | GET | /api/v1/market/info-prices/periods |
| IP-API-003 | 信息价列表查询 | POST | /api/v1/market/info-prices/list |
| IP-API-004 | 信息价详情 | GET | /api/v1/market/info-prices/{infoPriceId} |
| IP-API-005 | 价格趋势查询 | POST | /api/v1/market/info-prices/trend |
| IP-API-006 | 地区价格对比 | POST | /api/v1/market/info-prices/compare |
| IP-API-007 | 分类统计 | GET | /api/v1/market/info-prices/category-stats |
| IP-API-008 | 信息价导出 | POST | /api/v1/market/info-prices/export |
| IP-API-009 | 信息价推荐 | POST | /api/v1/market/info-prices/recommend |
| IP-API-010 | 订阅列表 | GET | /api/v1/market/info-prices/subscriptions |
| IP-API-011 | 创建订阅 | POST | /api/v1/market/info-prices/subscriptions |
| IP-API-012 | 取消订阅 | DELETE | /api/v1/market/info-prices/subscriptions/{subscriptionId} |

### 6.2 核心接口定义

#### 6.2.1 信息价列表查询

**请求：**
```json
POST /api/v1/market/info-prices/list
{
  "filters": {
    "sourceId": "SRC-GD-001",
    "periodCode": "2025-06",
    "categoryL1": "钢材",
    "keyword": "HRB400",
    "changeFlag": "up",
    "mappingStatus": "mapped"
  },
  "pagination": {
    "page": 1,
    "pageSize": 20
  },
  "sort": {
    "field": "momChange",
    "order": "desc"
  }
}
```

**响应：**
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "source": {
      "sourceId": "SRC-GD-001",
      "sourceName": "广东省造价站",
      "regionLevel": "province"
    },
    "period": {
      "periodCode": "2025-06",
      "periodName": "2025年6月材料信息价",
      "publishDate": "2025-06-05",
      "effectiveDate": "2025-06-01",
      "expireDate": "2025-06-30",
      "materialCount": 12580
    },
    "statistics": {
      "totalCount": 12580,
      "upCount": 1286,
      "downCount": 856,
      "unchangedCount": 10350,
      "newCount": 88
    },
    "total": 3250,
    "page": 1,
    "pageSize": 20,
    "list": [
      {
        "infoPriceId": "IP202506001",
        "materialCode": "GD-GC-001",
        "materialName": "钢筋",
        "specification": "HRB400 Φ12 9m",
        "unit": "吨",
        "categoryL1": "钢材",
        "categoryL2": "钢筋",
        "infoPrice": 4180,
        "taxRate": 13,
        "taxInclusivePrice": 4723.40,
        "priceType": "guide",
        "pricePeriod": "2025-06",
        "lastPeriodPrice": 4078,
        "momChange": 2.5,
        "yoyChange": 5.2,
        "changeFlag": "up",
        "smlCode": "SML-0401-001",
        "mappingStatus": "auto",
        "mappingConfidence": 0.95
      }
    ]
  }
}
```

#### 6.2.2 信息价推荐（计价模块调用）

**请求：**
```json
POST /api/v1/market/info-prices/recommend
{
  "smlCode": "SML-0401-001",
  "provinceCode": "440000",
  "cityCode": "440300",
  "pricePeriod": "2025-06"
}
```

**响应：**
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "smlCode": "SML-0401-001",
    "materialName": "钢筋",
    "specification": "HRB400 Φ12",
    "unit": "吨",
    "recommendations": [
      {
        "sourceId": "SRC-GD-001",
        "sourceName": "广东省造价站",
        "regionLevel": "province",
        "infoPrice": 4180,
        "taxInclusivePrice": 4723.40,
        "pricePeriod": "2025-06",
        "publishDate": "2025-06-05",
        "momChange": 2.5,
        "yoyChange": 5.2,
        "priority": 1
      },
      {
        "sourceId": "SRC-GD-SZ-001",
        "sourceName": "深圳市造价站",
        "regionLevel": "city",
        "infoPrice": 4220,
        "taxInclusivePrice": 4768.60,
        "pricePeriod": "2025-06",
        "publishDate": "2025-06-08",
        "momChange": 2.8,
        "yoyChange": 5.5,
        "priority": 2
      }
    ],
    "recommendPrice": 4180,
    "recommendSource": "广东省造价站",
    "recommendReason": "优先使用省级信息价作为参考"
  }
}
```

#### 6.2.3 地区价格对比

**请求：**
```json
POST /api/v1/market/info-prices/compare
{
  "smlCode": "SML-0401-001",
  "pricePeriod": "2025-06",
  "provinceCodes": ["440000", "450000", "430000", "420000", "350000"],
  "baseProvinceCode": "440000"
}
```

**响应：**
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "smlCode": "SML-0401-001",
    "materialName": "钢筋 HRB400 Φ12",
    "unit": "吨",
    "pricePeriod": "2025-06",
    "baseRegion": {
      "provinceCode": "440000",
      "provinceName": "广东省",
      "infoPrice": 4180
    },
    "comparisons": [
      {
        "provinceCode": "350000",
        "provinceName": "福建省",
        "sourceName": "福建省造价站",
        "infoPrice": 4280,
        "deviation": 2.4,
        "momChange": 1.8
      },
      {
        "provinceCode": "440000",
        "provinceName": "广东省",
        "sourceName": "广东省造价站",
        "infoPrice": 4180,
        "deviation": 0,
        "momChange": 2.5
      },
      {
        "provinceCode": "430000",
        "provinceName": "湖南省",
        "sourceName": "湖南省造价站",
        "infoPrice": 4050,
        "deviation": -3.1,
        "momChange": 1.5
      }
    ],
    "statistics": {
      "avgPrice": 4082,
      "maxPrice": 4280,
      "minPrice": 3920,
      "priceRange": 360
    }
  }
}
```

---

## 7. 数据采集管理（管理后台）

### 7.1 采集流程

```
┌─────────────────────────────────────────────────────────────────────────┐
│                          信息价采集流程                                  │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │  Step 1: 采集触发                                                │   │
│  │  • 定时任务：按数据源配置的发布周期自动触发                       │   │
│  │  • 手动触发：管理员手动发起采集                                   │   │
│  └──────────────────────────────┬──────────────────────────────────┘   │
│                                 │                                       │
│                                 ▼                                       │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │  Step 2: 数据获取                                                │   │
│  │  • API对接：调用造价站开放API获取数据                             │   │
│  │  • 网页采集：解析造价站网页获取数据                               │   │
│  │  • 文件导入：导入造价站发布的Excel/PDF文件                        │   │
│  └──────────────────────────────┬──────────────────────────────────┘   │
│                                 │                                       │
│                                 ▼                                       │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │  Step 3: 数据清洗                                                │   │
│  │  • 格式标准化：统一字段格式、单位换算                             │   │
│  │  • 数据去重：去除重复记录                                         │   │
│  │  • 异常处理：处理空值、异常值                                     │   │
│  └──────────────────────────────┬──────────────────────────────────┘   │
│                                 │                                       │
│                                 ▼                                       │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │  Step 4: 标准化映射                                              │   │
│  │  • 自动映射：基于规则匹配SMLCode                                  │   │
│  │  • 置信度计算：评估映射准确度                                     │   │
│  │  • 人工复核：低置信度映射人工确认                                 │   │
│  └──────────────────────────────┬──────────────────────────────────┘   │
│                                 │                                       │
│                                 ▼                                       │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │  Step 5: 变动计算                                                │   │
│  │  • 环比计算：与上期价格对比                                       │   │
│  │  • 同比计算：与去年同期对比                                       │   │
│  │  • 变动标识：标记涨跌状态                                         │   │
│  └──────────────────────────────┬──────────────────────────────────┘   │
│                                 │                                       │
│                                 ▼                                       │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │  Step 6: 数据发布                                                │   │
│  │  • 质量检查：校验数据完整性和准确性                               │   │
│  │  • 审核发布：管理员审核后发布                                     │   │
│  │  • 通知推送：向订阅用户推送更新通知                               │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### 7.2 采集配置示例

```json
{
  "sourceId": "SRC-GD-001",
  "sourceName": "广东省造价站",
  "collectMethod": "api",
  "collectConfig": {
    "apiUrl": "https://api.gdzjzx.com/v1/info-prices",
    "apiKey": "******",
    "requestFormat": "json",
    "responseMapping": {
      "materialCode": "code",
      "materialName": "name",
      "specification": "spec",
      "unit": "unit",
      "infoPrice": "price",
      "category": "category_path"
    },
    "schedule": {
      "type": "monthly",
      "dayOfMonth": 5,
      "hour": 9,
      "minute": 0
    }
  }
}
```

---

## 8. 非功能需求

### 8.1 性能要求

| 场景 | 指标 | 目标值 |
|------|------|--------|
| 列表查询 | 响应时间 | < 500ms |
| 信息价推荐 | 响应时间 | < 200ms |
| 趋势分析 | 响应时间 | < 1s |
| 地区对比 | 响应时间 | < 800ms |
| 数据采集 | 单次采集时间 | < 30min/数据源 |

### 8.2 数据质量

| 类别 | 要求 |
|------|------|
| 数据完整性 | 采集数据完整率≥99% |
| 映射准确率 | 自动映射准确率≥90% |
| 时效性 | 新期刊发布后24小时内采集完成 |

### 8.3 可用性

| 类别 | 要求 |
|------|------|
| 系统可用性 | 99.9% |
| 数据更新频率 | 与数据源发布周期同步 |

---

## 9. 附录

### 9.1 已对接数据源清单（示例）

| 数据源编码 | 数据源名称 | 地区级别 | 发布周期 | 采集方式 | 状态 |
|------------|------------|----------|----------|----------|------|
| SRC-GD-001 | 广东省造价站 | 省级 | 月刊 | API | 已对接 |
| SRC-GD-SZ-001 | 深圳市造价站 | 市级 | 月刊 | API | 已对接 |
| SRC-GD-GZ-001 | 广州市造价站 | 市级 | 月刊 | 网页采集 | 已对接 |
| SRC-SH-001 | 上海市造价站 | 市级 | 月刊 | API | 已对接 |
| SRC-BJ-001 | 北京市造价站 | 市级 | 月刊 | 文件导入 | 已对接 |

### 9.2 价格类型说明

| 价格类型 | 编码 | 说明 |
|----------|------|------|
| 指导价 | guide | 官方指导价格，固定值 |
| 市场价 | market | 市场参考价格，固定值 |
| 区间价 | range | 价格区间，有上下限 |

---

## 10. 版本历史

| 版本 | 日期 | 修订人 | 修订内容 |
|------|------|--------|----------|
| V1.0 | 2026-01-18 | - | 初版，完成信息价功能规格说明 |

---

**文档说明：**
1. 本文档定义信息价模块的功能规格，作为开发实现的依据
2. 信息价是数据商城的核心数据源，为其他模块提供官方价格参考
3. 数据采集管理为管理后台功能，普通用户不可见
4. 后续迭代将根据实际对接的数据源持续完善