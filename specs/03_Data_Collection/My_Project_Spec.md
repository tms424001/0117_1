# 我的项目规范 (My Project Spec)

> 版本：V1.0  
> 更新日期：2026-01-18  
> 所属模块：03_Data_Collection

---

## 1. 概述

### 1.1 功能定位

"我的项目"是个人数据仓库的核心，负责：
- 接收造价文件推送的项目数据
- 执行**标签化处理**（功能标签匹配、规模分档、空间/专业映射）
- 自动**生成指标**（经济指标、工程量指标、人材机指标）
- 支持**PR补录**（项目概况、设计参数、建设条件等详细信息）
- **推送到企业库**（案例库）

### 1.2 数据流程

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│   造价文件采集                        我的项目                               │
│   ┌─────────────┐                                                          │
│   │  上传       │                    ┌────────────────────────────────┐    │
│   │  预览       │                    │                                │    │
│   │  分析       │ ─── 推送 ────────▶│  1. 接收项目数据                │    │
│   │  补录       │                    │     状态：待标签化              │    │
│   │  推送       │                    │                                │    │
│   └─────────────┘                    │  2. 标签化处理                  │    │
│                                      │     ├─ 功能标签匹配（239标签）  │    │
│                                      │     ├─ 规模分档（7类35档）      │    │
│                                      │     └─ 空间/专业映射            │    │
│                                      │     状态：待计算指标            │    │
│                                      │                                │    │
│                                      │  3. 指标计算                    │    │
│                                      │     ├─ 经济指标（单方造价等）   │    │
│                                      │     ├─ 工程量指标（钢筋/混凝土）│    │
│                                      │     └─ 人材机指标              │    │
│                                      │     状态：已生成指标            │    │
│                                      │     → 自动同步到"我的指标"      │    │
│                                      │                                │    │
│                                      │  4. PR补录（可选）              │    │
│                                      │     ├─ 项目概况                 │    │
│                                      │     ├─ 设计参数                 │    │
│                                      │     └─ 建设条件                 │    │
│                                      │     状态：已补录                │    │
│                                      │                                │    │
│                                      │  5. 推送到企业库               │    │
│                                      │     → 案例库（PR审核）          │    │
│                                      │     状态：已推送                │    │
│                                      │                                │    │
│                                      └────────────────────────────────┘    │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 1.3 状态流转

```
┌──────────┐    标签化     ┌──────────┐    计算指标   ┌──────────┐
│ 待标签化  │ ──────────▶ │待计算指标 │ ──────────▶ │已生成指标 │
└──────────┘              └──────────┘              └────┬─────┘
                                                        │
                                              ┌─────────┴─────────┐
                                              │                   │
                                              ▼ PR补录（可选）     ▼ 直接推送
                                        ┌──────────┐        ┌──────────┐
                                        │  已补录   │ ─────▶│  已推送   │
                                        └──────────┘        └──────────┘
```

| 状态 | 说明 | 可执行操作 |
|------|------|------------|
| pending | 待标签化 | 查看、标签化、删除 |
| tagging | 待计算指标 | 查看、计算指标、删除 |
| indexed | 已生成指标 | 查看、PR补录、推送、删除 |
| completed | 已补录 | 查看、PR补录、推送、删除 |
| pushed | 已推送 | 查看、删除 |

---

## 2. 页面结构

### 2.1 我的项目列表页

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  数据采集 > 我的数据 > 我的项目                                             │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─ 操作栏 ────────────────────────────────────────────────────────────┐   │
│  │                                                                      │   │
│  │  [批量标签化]  [批量计算指标]  [批量删除]         🔍 搜索项目名称    │   │
│  │                                                                      │   │
│  │  筛选：状态 [全部 ▼]  功能标签 [全部 ▼]  地点 [全部 ▼]              │   │
│  │        计价阶段 [全部 ▼]  规模档 [全部 ▼]                           │   │
│  │                                                                      │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─ 项目列表 ──────────────────────────────────────────────────────────┐   │
│  │                                                                      │   │
│  │  □  项目名称        功能标签    规模档  地点  计价阶段  状态    操作 │   │
│  │  ─────────────────────────────────────────────────────────────────── │   │
│  │  □  XX医院门诊楼    综合医院    大型   北京  招标控制价 已生成指标···│   │
│  │  □  XX学校教学楼    中学-教学楼 中型   上海  结算      已补录    ···│   │
│  │  □  XX办公楼项目    商务办公    大型   广州  投标报价  待标签化  ···│   │
│  │  □  XX住宅小区一期  住宅-高层   特大型 深圳  招标控制价 已推送    ···│   │
│  │  □  XX商业综合体    商业综合体  大型   杭州  概算      待计算指标···│   │
│  │                                                                      │   │
│  │  ─────────────────────────────────────────────────────────────────── │   │
│  │                                          共 56 条   < 1 2 3 ... 6 >  │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 2.2 列表字段定义

| 字段 | 说明 | 宽度 | 排序 |
|------|------|------|------|
| 复选框 | 批量操作选择 | 40px | - |
| 项目名称 | 项目名称 | 自适应 | 支持 |
| 功能标签 | 匹配的功能标签 | 120px | 支持 |
| 规模档 | 规模分档结果 | 80px | 支持 |
| 地点 | 项目所在地 | 80px | 支持 |
| 计价阶段 | 计价阶段 | 100px | 支持 |
| 状态 | 当前状态 | 100px | 支持 |
| 操作 | 操作按钮组 | 200px | - |

### 2.3 操作按钮

| 按钮 | 图标 | 说明 | 适用状态 |
|------|------|------|----------|
| 查看 | 👁 | 查看项目详情 | 全部 |
| 标签化 | 🏷️ | 执行标签化处理 | 待标签化 |
| 计算指标 | 📊 | 计算并生成指标 | 待计算指标 |
| PR补录 | ✏️ | 补录详细信息 | 已生成指标、已补录 |
| 推送 | 📤 | 推送到企业库 | 已生成指标、已补录 |
| 删除 | 🗑 | 删除项目 | 全部（已推送除外） |

**按钮状态规则：**

| 状态 | 查看 | 标签化 | 计算指标 | PR补录 | 推送 | 删除 |
|------|:----:|:------:|:--------:|:------:|:----:|:----:|
| 待标签化 | ✓ | ✓ | ✗ | ✗ | ✗ | ✓ |
| 待计算指标 | ✓ | ✓ | ✓ | ✗ | ✗ | ✓ |
| 已生成指标 | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ |
| 已补录 | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ |
| 已推送 | ✓ | ✗ | ✗ | ✗ | ✗ | ✓ |

---

## 3. 查看弹窗

### 3.1 查看弹窗界面

点击 **[查看]** 按钮，打开项目详情弹窗：

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  查看项目 - XX医院门诊楼                                             [×]    │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  [基本信息] [标签化结果] [指标数据] [单位工程] [PR补录信息]                 │
│  ─────────────────────────────────────────────────────────────────────────  │
│                                                                             │
│  ┌─ 基本信息 ──────────────────────────────────────────────────────────┐   │
│  │                                                                      │   │
│  │  项目名称：XX医院门诊楼项目                                          │   │
│  │  来源文件：XX医院项目.gbq              采集时间：2026-01-18          │   │
│  │                                                                      │   │
│  │  ┌─────────────────────────────────────────────────────────────┐    │   │
│  │  │  地点        │ 北京市海淀区                                  │    │   │
│  │  │  计价阶段    │ 招标控制价                                    │    │   │
│  │  │  材价基准期  │ 2026年01月                                    │    │   │
│  │  │  总建筑面积  │ 25,000 m²                                     │    │   │
│  │  │  工程总造价  │ 85,000,000 元                                 │    │   │
│  │  │  单方造价    │ 3,400 元/m²                                   │    │   │
│  │  └─────────────────────────────────────────────────────────────┘    │   │
│  │                                                                      │   │
│  │  当前状态：已生成指标                                                │   │
│  │                                                                      │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                         [关闭]              │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 3.2 Tab页说明

| Tab | 内容 | 适用状态 |
|-----|------|----------|
| 基本信息 | 项目基本信息、来源、造价汇总 | 全部 |
| 标签化结果 | 功能标签、规模档、空间/专业映射 | 待计算指标及之后 |
| 指标数据 | 经济指标、工程量指标、人材机指标 | 已生成指标及之后 |
| 单位工程 | 单位工程列表及明细 | 全部 |
| PR补录信息 | 项目概况、设计参数、建设条件 | 已补录及之后 |

---

## 4. 标签化弹窗

### 4.1 标签化弹窗界面

点击 **[标签化]** 按钮，打开标签化处理弹窗：

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  标签化处理 - XX医院门诊楼                                           [×]    │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─ 项目信息 ──────────────────────────────────────────────────────────┐   │
│  │                                                                      │   │
│  │  项目名称：XX医院门诊楼项目                                          │   │
│  │  总建筑面积：25,000 m²    单位工程数：6 个                           │   │
│  │                                                                      │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─ 功能标签匹配 ──────────────────────────────────────────────────────┐   │
│  │                                                                      │   │
│  │  项目级标签：                                                        │   │
│  │  ┌─────────────────────────────────────────────────────────────┐    │   │
│  │  │  自动识别：综合医院                                          │    │   │
│  │  │  置信度：92%                                                 │    │   │
│  │  │                                                             │    │   │
│  │  │  确认标签：[综合医院 ▼]                   [修改]             │    │   │
│  │  │                                                             │    │   │
│  │  │  一级分类：医疗建筑                                          │    │   │
│  │  │  二级分类：医院                                              │    │   │
│  │  │  三级分类：综合医院                                          │    │   │
│  │  └─────────────────────────────────────────────────────────────┘    │   │
│  │                                                                      │   │
│  │  单位工程标签：                                                      │   │
│  │  ┌────────────────────────────────────────────────────────────────┐ │   │
│  │  │ 单位工程     │ 自动识别    │ 置信度 │ 确认标签           │ 状态 │ │   │
│  │  │─────────────│────────────│───────│──────────────────│─────│ │   │
│  │  │ 门诊楼-土建  │ 门诊楼      │ 95%   │ [门诊楼 ▼]        │ ✓   │ │   │
│  │  │ 门诊楼-装饰  │ 门诊楼      │ 95%   │ [门诊楼 ▼]        │ ✓   │ │   │
│  │  │ 门诊楼-安装  │ 门诊楼      │ 88%   │ [门诊楼 ▼]        │ ✓   │ │   │
│  │  │ 附属-配电房  │ 配套用房    │ 75%   │ [配套用房 ▼]      │ ⚠   │ │   │
│  │  │ 附属-水泵房  │ 配套用房    │ 72%   │ [配套用房 ▼]      │ ⚠   │ │   │
│  │  │ 附属-门卫室  │ 配套用房    │ 80%   │ [配套用房 ▼]      │ ✓   │ │   │
│  │  └────────────────────────────────────────────────────────────────┘ │   │
│  │                                                                      │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─ 规模分档 ──────────────────────────────────────────────────────────┐   │
│  │                                                                      │   │
│  │  规模类型：建筑面积                                                  │   │
│  │  规模值：25,000 m²                                                   │   │
│  │  自动分档：大型（15,000-50,000 m²）                                  │   │
│  │                                                                      │   │
│  │  确认分档：[大型 ▼]                                                  │   │
│  │                                                                      │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─ 空间/专业映射 ────────────────────────────────────────────────────┐   │
│  │                                                                      │   │
│  │  空间类型映射（基于功能标签自动推荐）：                               │   │
│  │  ☑ 医疗空间  ☑ 公共空间  □ 办公空间  □ 设备空间                     │   │
│  │                                                                      │   │
│  │  专业类型映射：                                                      │   │
│  │  ☑ 建筑  ☑ 结构  ☑ 给排水  ☑ 暖通  ☑ 电气  □ 智能化  ☑ 医疗专项   │   │
│  │                                                                      │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
├─────────────────────────────────────────────────────────────────────────────┤
│                                    [取消]    [确认标签化]                   │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 4.2 标签化处理流程

```
┌──────────────┐    ┌──────────────┐    ┌──────────────┐    ┌──────────────┐
│  自动识别     │ →  │  人工确认     │ →  │  空间/专业    │ →  │  保存结果     │
│  功能标签     │    │  调整标签     │    │  映射        │    │  更新状态     │
└──────────────┘    └──────────────┘    └──────────────┘    └──────────────┘
```

### 4.3 标签化规则

| 规则 | 说明 |
|------|------|
| 项目级标签 | 基于项目名称、建设单位等信息自动识别 |
| 单位工程标签 | 基于单位工程名称自动识别 |
| 置信度阈值 | ≥80% 自动确认，<80% 需人工确认 |
| 规模分档 | 基于功能标签对应的规模类型自动分档 |
| 空间映射 | 基于功能标签自动推荐空间类型 |
| 专业映射 | 基于单位工程专业属性自动推荐 |

---

## 5. 计算指标弹窗

### 5.1 计算指标弹窗界面

点击 **[计算指标]** 按钮，打开指标计算弹窗：

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  计算指标 - XX医院门诊楼                                             [×]    │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─ 计算范围 ──────────────────────────────────────────────────────────┐   │
│  │                                                                      │   │
│  │  ☑ 全部单位工程 (6个)                                               │   │
│  │                                                                      │   │
│  │  或选择部分：                                                        │   │
│  │  ┌────────────────────────────────────────────────────────────────┐ │   │
│  │  │  ☑ 门诊楼 - 土建工程      功能标签：门诊楼     面积：20,000m²  │ │   │
│  │  │  ☑ 门诊楼 - 装饰工程      功能标签：门诊楼     面积：20,000m²  │ │   │
│  │  │  ☑ 门诊楼 - 安装工程      功能标签：门诊楼     面积：20,000m²  │ │   │
│  │  │  ☑ 附属用房 - 配电房      功能标签：配套用房   面积：500m²     │ │   │
│  │  │  ☑ 附属用房 - 水泵房      功能标签：配套用房   面积：300m²     │ │   │
│  │  │  ☑ 附属用房 - 门卫室      功能标签：配套用房   面积：50m²      │ │   │
│  │  └────────────────────────────────────────────────────────────────┘ │   │
│  │                                                                      │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─ 计算指标类型 ──────────────────────────────────────────────────────┐   │
│  │                                                                      │   │
│  │  ☑ 经济指标                                                         │   │
│  │     ├─ 单方造价（元/m²）                                            │   │
│  │     ├─ 分部造价占比（土建/装饰/安装/...）                           │   │
│  │     └─ 措施费占比、规费占比、税金占比                               │   │
│  │                                                                      │   │
│  │  ☑ 工程量指标                                                       │   │
│  │     ├─ 钢筋含量（kg/m²）                                            │   │
│  │     ├─ 混凝土含量（m³/m²）                                          │   │
│  │     ├─ 模板含量（m²/m²）                                            │   │
│  │     └─ 砌体含量（m³/m²）                                            │   │
│  │                                                                      │   │
│  │  ☑ 人材机指标                                                       │   │
│  │     ├─ 人工费占比                                                   │   │
│  │     ├─ 材料费占比                                                   │   │
│  │     └─ 机械费占比                                                   │   │
│  │                                                                      │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
├─────────────────────────────────────────────────────────────────────────────┤
│                                    [取消]    [开始计算]                     │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 5.2 计算进度

点击 **[开始计算]** 后显示进度：

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  计算指标 - XX医院门诊楼                                             [×]    │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─ 计算进度 ──────────────────────────────────────────────────────────┐   │
│  │                                                                      │   │
│  │  整体进度：████████████████████████░░░░░░  80%                       │   │
│  │                                                                      │   │
│  │  ┌────────────────────────────────────────────────────────────────┐ │   │
│  │  │  ✓ 数据预处理            完成                                  │ │   │
│  │  │  ✓ 经济指标计算          完成   单方造价：3,400 元/m²          │ │   │
│  │  │  ✓ 工程量指标计算        完成   钢筋：58.6 kg/m²               │ │   │
│  │  │  ◐ 人材机指标计算        进行中                                │ │   │
│  │  │  ○ 指标汇总              等待中                                │ │   │
│  │  └────────────────────────────────────────────────────────────────┘ │   │
│  │                                                                      │   │
│  │  当前：正在计算人材机指标...                                         │   │
│  │                                                                      │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
├─────────────────────────────────────────────────────────────────────────────┤
│                                              [取消计算]                     │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 5.3 计算结果

计算完成后显示结果：

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  计算指标 - XX医院门诊楼                                             [×]    │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─ 计算结果 ──────────────────────────────────────────────────────────┐   │
│  │                                                                      │   │
│  │  ✓ 指标计算完成                                                     │   │
│  │                                                                      │   │
│  │  ┌─ 项目级指标 ────────────────────────────────────────────────┐   │   │
│  │  │                                                              │   │   │
│  │  │  经济指标：                                                  │   │   │
│  │  │  ┌──────────────────────────────────────────────────────┐   │   │   │
│  │  │  │ 单方造价        │ 3,400 元/m²                        │   │   │   │
│  │  │  │ 土建占比        │ 45.2%                              │   │   │   │
│  │  │  │ 装饰占比        │ 22.8%                              │   │   │   │
│  │  │  │ 安装占比        │ 25.5%                              │   │   │   │
│  │  │  │ 措施费占比      │ 6.5%                               │   │   │   │
│  │  │  └──────────────────────────────────────────────────────┘   │   │   │
│  │  │                                                              │   │   │
│  │  │  工程量指标：                                                │   │   │
│  │  │  ┌──────────────────────────────────────────────────────┐   │   │   │
│  │  │  │ 钢筋含量        │ 58.6 kg/m²                         │   │   │   │
│  │  │  │ 混凝土含量      │ 0.42 m³/m²                         │   │   │   │
│  │  │  │ 模板含量        │ 2.85 m²/m²                         │   │   │   │
│  │  │  └──────────────────────────────────────────────────────┘   │   │   │
│  │  │                                                              │   │   │
│  │  │  人材机指标：                                                │   │   │
│  │  │  ┌──────────────────────────────────────────────────────┐   │   │   │
│  │  │  │ 人工费占比      │ 18.5%                              │   │   │   │
│  │  │  │ 材料费占比      │ 62.3%                              │   │   │   │
│  │  │  │ 机械费占比      │ 19.2%                              │   │   │   │
│  │  │  └──────────────────────────────────────────────────────┘   │   │   │
│  │  │                                                              │   │   │
│  │  └──────────────────────────────────────────────────────────────┘   │   │
│  │                                                                      │   │
│  │  已自动同步到"我的指标"：6 条单位工程指标 + 1 条项目级指标            │   │
│  │                                                                      │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
├─────────────────────────────────────────────────────────────────────────────┤
│                           [查看详情]              [完成]                    │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 5.4 指标计算规则

| 指标类型 | 指标项 | 计算公式 |
|----------|--------|----------|
| **经济指标** | 单方造价 | 工程总造价 ÷ 总建筑面积 |
| | 分部占比 | 分部造价 ÷ 工程总造价 × 100% |
| | 措施费占比 | 措施费 ÷ 工程总造价 × 100% |
| **工程量指标** | 钢筋含量 | 钢筋工程量(t) × 1000 ÷ 建筑面积 |
| | 混凝土含量 | 混凝土工程量(m³) ÷ 建筑面积 |
| | 模板含量 | 模板工程量(m²) ÷ 建筑面积 |
| **人材机指标** | 人工费占比 | 人工费 ÷ (人工费+材料费+机械费) × 100% |
| | 材料费占比 | 材料费 ÷ (人工费+材料费+机械费) × 100% |
| | 机械费占比 | 机械费 ÷ (人工费+材料费+机械费) × 100% |

---

## 6. PR补录弹窗

### 6.1 PR补录弹窗界面

点击 **[PR补录]** 按钮，打开PR补录弹窗：

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  PR补录 - XX医院门诊楼                                               [×]    │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  [项目概况] [设计参数] [建设条件] [特殊说明]                                │
│  ─────────────────────────────────────────────────────────────────────────  │
│                                                                             │
│  ┌─ 项目概况 ──────────────────────────────────────────────────────────┐   │
│  │                                                                      │   │
│  │  项目名称：[XX医院门诊楼项目                                      ]  │   │
│  │                                                                      │   │
│  │  ┌─ 参建单位 ──────────────────────────────────────────────────┐   │   │
│  │  │                                                              │   │   │
│  │  │  建设单位：[XX市卫生健康委员会                             ] │   │   │
│  │  │  设计单位：[XX建筑设计研究院                               ] │   │   │
│  │  │  施工单位：[XX建筑工程有限公司                             ] │   │   │
│  │  │  监理单位：[XX工程监理有限公司                             ] │   │   │
│  │  │  咨询单位：[XX造价咨询有限公司                             ] │   │   │
│  │  │                                                              │   │   │
│  │  └──────────────────────────────────────────────────────────────┘   │   │
│  │                                                                      │   │
│  │  ┌─ 项目时间 ──────────────────────────────────────────────────┐   │   │
│  │  │                                                              │   │   │
│  │  │  立项时间：[2024-06      ]    开工时间：[2025-01      ]      │   │   │
│  │  │  竣工时间：[2026-12      ]    编制时间：[2025-03      ]      │   │   │
│  │  │                                                              │   │   │
│  │  └──────────────────────────────────────────────────────────────┘   │   │
│  │                                                                      │   │
│  │  ┌─ 项目描述 ──────────────────────────────────────────────────┐   │   │
│  │  │                                                              │   │   │
│  │  │  [本项目为XX市第一人民医院门诊综合楼，位于XX区XX路XX号，    │   │   │
│  │  │   总建筑面积25000平方米，地上12层、地下2层...              ] │   │   │
│  │  │                                                              │   │   │
│  │  └──────────────────────────────────────────────────────────────┘   │   │
│  │                                                                      │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
├─────────────────────────────────────────────────────────────────────────────┤
│                                    [取消]    [保存]                         │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 6.2 设计参数Tab

```
┌─ 设计参数 ──────────────────────────────────────────────────────────────┐
│                                                                          │
│  ┌─ 建筑设计 ────────────────────────────────────────────────────────┐  │
│  │                                                                    │  │
│  │  总建筑面积：[25000    ] m²    地上面积：[20000    ] m²           │  │
│  │  地下面积：  [5000     ] m²    容积率：  [2.5      ]              │  │
│  │                                                                    │  │
│  │  地上层数：[12] 层    地下层数：[2] 层    建筑高度：[48.5  ] m     │  │
│  │                                                                    │  │
│  │  建筑类别：[一类高层 ▼]    耐火等级：[一级 ▼]                      │  │
│  │                                                                    │  │
│  └────────────────────────────────────────────────────────────────────┘  │
│                                                                          │
│  ┌─ 结构设计 ────────────────────────────────────────────────────────┐  │
│  │                                                                    │  │
│  │  结构类型：[框架结构 ▼]      抗震设防烈度：[8度 ▼]                 │  │
│  │  基础类型：[桩基础 ▼]        基础持力层：[中风化岩 ▼]              │  │
│  │                                                                    │  │
│  │  设计使用年限：[50] 年       安全等级：[二级 ▼]                    │  │
│  │                                                                    │  │
│  └────────────────────────────────────────────────────────────────────┘  │
│                                                                          │
│  ┌─ 机电设计 ────────────────────────────────────────────────────────┐  │
│  │                                                                    │  │
│  │  给水方式：[市政直供+加压 ▼]    排水体制：[雨污分流 ▼]             │  │
│  │  空调方式：[中央空调 ▼]        供暖方式：[集中供暖 ▼]              │  │
│  │  供电等级：[一级负荷 ▼]        电梯数量：[6] 台                    │  │
│  │                                                                    │  │
│  └────────────────────────────────────────────────────────────────────┘  │
│                                                                          │
└──────────────────────────────────────────────────────────────────────────┘
```

### 6.3 建设条件Tab

```
┌─ 建设条件 ──────────────────────────────────────────────────────────────┐
│                                                                          │
│  ┌─ 场地条件 ────────────────────────────────────────────────────────┐  │
│  │                                                                    │  │
│  │  用地面积：[12000    ] m²    场地标高：[35.5    ] m               │  │
│  │  地下水位：[地下 8   ] m     地质条件：[良好 ▼]                   │  │
│  │                                                                    │  │
│  │  场地特点：☑ 城市中心  □ 山地  □ 临水  □ 软土地基  □ 岩溶        │  │
│  │                                                                    │  │
│  └────────────────────────────────────────────────────────────────────┘  │
│                                                                          │
│  ┌─ 施工条件 ────────────────────────────────────────────────────────┐  │
│  │                                                                    │  │
│  │  施工难度：[中等 ▼]          交通条件：[良好 ▼]                    │  │
│  │  材料供应：[本地为主 ▼]      劳动力供应：[充足 ▼]                  │  │
│  │                                                                    │  │
│  │  特殊要求：☑ 夜间施工限制  □ 噪音控制  ☑ 扬尘控制  □ 交通疏导    │  │
│  │                                                                    │  │
│  └────────────────────────────────────────────────────────────────────┘  │
│                                                                          │
│  ┌─ 政策条件 ────────────────────────────────────────────────────────┐  │
│  │                                                                    │  │
│  │  取费标准：[北京市2021定额 ▼]                                      │  │
│  │  人工调整：[是 ▼]  系数：[1.15]                                    │  │
│  │  材料调差：[是 ▼]  方式：[价差调整 ▼]                              │  │
│  │                                                                    │  │
│  └────────────────────────────────────────────────────────────────────┘  │
│                                                                          │
└──────────────────────────────────────────────────────────────────────────┘
```

### 6.4 PR补录字段汇总

| 分组 | 字段 | 必填 | 说明 |
|------|------|:----:|------|
| **项目概况** | | | |
| | 建设单位 | 否 | 文本输入 |
| | 设计单位 | 否 | 文本输入 |
| | 施工单位 | 否 | 文本输入 |
| | 监理单位 | 否 | 文本输入 |
| | 咨询单位 | 否 | 文本输入 |
| | 立项时间 | 否 | 年月选择 |
| | 开工时间 | 否 | 年月选择 |
| | 竣工时间 | 否 | 年月选择 |
| | 项目描述 | 否 | 多行文本 |
| **设计参数** | | | |
| | 容积率 | 否 | 数值 |
| | 建筑高度 | 否 | 数值(m) |
| | 建筑类别 | 否 | 枚举选择 |
| | 耐火等级 | 否 | 枚举选择 |
| | 结构类型 | 否 | 枚举选择 |
| | 抗震设防烈度 | 否 | 枚举选择 |
| | 基础类型 | 否 | 枚举选择 |
| | 设计使用年限 | 否 | 数值(年) |
| | 给水方式 | 否 | 枚举选择 |
| | 空调方式 | 否 | 枚举选择 |
| | 供电等级 | 否 | 枚举选择 |
| | 电梯数量 | 否 | 数值 |
| **建设条件** | | | |
| | 用地面积 | 否 | 数值(m²) |
| | 场地标高 | 否 | 数值(m) |
| | 地下水位 | 否 | 数值(m) |
| | 地质条件 | 否 | 枚举选择 |
| | 场地特点 | 否 | 多选 |
| | 施工难度 | 否 | 枚举选择 |
| | 交通条件 | 否 | 枚举选择 |
| | 特殊要求 | 否 | 多选 |
| | 取费标准 | 否 | 下拉选择 |
| | 人工调整系数 | 否 | 数值 |
| | 材料调差方式 | 否 | 枚举选择 |
| **特殊说明** | | | |
| | 特殊说明 | 否 | 多行文本 |

---

## 7. 推送弹窗

### 7.1 推送弹窗界面

点击 **[推送]** 按钮，打开推送确认弹窗：

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  推送到企业库 - XX医院门诊楼                                         [×]    │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─ 推送内容预览 ──────────────────────────────────────────────────────┐   │
│  │                                                                      │   │
│  │  将推送以下数据到企业库-案例库：                                     │   │
│  │                                                                      │   │
│  │  ┌────────────────────────────────────────────────────────────────┐ │   │
│  │  │                                                                │ │   │
│  │  │  📁 项目信息：XX医院门诊楼项目                                 │ │   │
│  │  │     ├─ 功能标签：综合医院                                      │ │   │
│  │  │     ├─ 规模档：大型（25,000 m²）                               │ │   │
│  │  │     ├─ 地点：北京市                                            │ │   │
│  │  │     └─ 计价阶段：招标控制价                                    │ │   │
│  │  │                                                                │ │   │
│  │  │  📊 指标数据：                                                 │ │   │
│  │  │     ├─ 项目级指标：1 条                                        │ │   │
│  │  │     └─ 单位工程指标：6 条                                      │ │   │
│  │  │                                                                │ │   │
│  │  │  📋 PR补录信息：                                               │ │   │
│  │  │     ├─ 项目概况：已填写                                        │ │   │
│  │  │     ├─ 设计参数：已填写                                        │ │   │
│  │  │     └─ 建设条件：已填写                                        │ │   │
│  │  │                                                                │ │   │
│  │  └────────────────────────────────────────────────────────────────┘ │   │
│  │                                                                      │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─ 推送选项 ──────────────────────────────────────────────────────────┐   │
│  │                                                                      │   │
│  │  推送目标：                                                          │   │
│  │  ☑ 案例库（项目信息+指标+补录信息）                                  │   │
│  │  ☑ 指标库（同步推送指标数据）                                        │   │
│  │                                                                      │   │
│  │  审核说明：[请审核该项目数据                                       ] │   │
│  │                                                                      │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ⚠️ 推送后将提交PR审核，审核通过后数据进入企业库。                        │
│                                                                             │
├─────────────────────────────────────────────────────────────────────────────┤
│                                    [取消]    [提交PR]                       │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 7.2 PR审核流程

```
┌──────────┐    ┌──────────┐    ┌──────────┐    ┌──────────┐
│  提交PR   │ →  │  待审核   │ →  │  审核中   │ →  │ 审核通过  │
└──────────┘    └──────────┘    └──────────┘    └────┬─────┘
                                    │                │
                                    ▼                ▼
                              ┌──────────┐    ┌──────────┐
                              │ 审核驳回  │    │ 进入案例库│
                              │ (退回修改)│    │ 进入指标库│
                              └──────────┘    └──────────┘
```

---

## 8. 数据模型

### 8.1 我的项目表 (my_project)

| 字段 | 类型 | 必填 | 说明 |
|------|------|:----:|------|
| id | VARCHAR(36) | 是 | 主键 |
| project_name | VARCHAR(200) | 是 | 项目名称 |
| source_file_id | VARCHAR(36) | 是 | 来源造价文件ID |
| status | VARCHAR(20) | 是 | 状态 |
| province | VARCHAR(50) | 是 | 省份 |
| city | VARCHAR(50) | 否 | 城市 |
| pricing_stage | VARCHAR(20) | 是 | 计价阶段 |
| price_base_date | DATE | 是 | 材价基准期 |
| total_area | DECIMAL(18,2) | 否 | 总建筑面积 |
| total_cost | DECIMAL(18,2) | 否 | 工程总造价 |
| unit_cost | DECIMAL(18,2) | 否 | 单方造价 |
| function_tag_code | VARCHAR(50) | 否 | 功能标签编码 |
| scale_level | VARCHAR(20) | 否 | 规模档 |
| space_types | VARCHAR(200) | 否 | 空间类型(逗号分隔) |
| profession_types | VARCHAR(200) | 否 | 专业类型(逗号分隔) |
| created_at | TIMESTAMP | 是 | 创建时间 |
| created_by | VARCHAR(36) | 是 | 创建人 |
| tagged_at | TIMESTAMP | 否 | 标签化时间 |
| indexed_at | TIMESTAMP | 否 | 指标生成时间 |
| completed_at | TIMESTAMP | 否 | 补录完成时间 |
| pushed_at | TIMESTAMP | 否 | 推送时间 |

### 8.2 项目PR补录表 (my_project_pr_info)

| 字段 | 类型 | 必填 | 说明 |
|------|------|:----:|------|
| id | VARCHAR(36) | 是 | 主键 |
| project_id | VARCHAR(36) | 是 | 项目ID |
| construction_unit | VARCHAR(200) | 否 | 建设单位 |
| design_unit | VARCHAR(200) | 否 | 设计单位 |
| contractor_unit | VARCHAR(200) | 否 | 施工单位 |
| supervisor_unit | VARCHAR(200) | 否 | 监理单位 |
| consultant_unit | VARCHAR(200) | 否 | 咨询单位 |
| approval_date | DATE | 否 | 立项时间 |
| start_date | DATE | 否 | 开工时间 |
| completion_date | DATE | 否 | 竣工时间 |
| project_description | TEXT | 否 | 项目描述 |
| floor_area_ratio | DECIMAL(6,2) | 否 | 容积率 |
| building_height | DECIMAL(8,2) | 否 | 建筑高度 |
| building_category | VARCHAR(50) | 否 | 建筑类别 |
| fire_rating | VARCHAR(20) | 否 | 耐火等级 |
| structure_type | VARCHAR(50) | 否 | 结构类型 |
| seismic_intensity | VARCHAR(20) | 否 | 抗震设防烈度 |
| foundation_type | VARCHAR(50) | 否 | 基础类型 |
| design_life | INT | 否 | 设计使用年限 |
| water_supply_type | VARCHAR(50) | 否 | 给水方式 |
| hvac_type | VARCHAR(50) | 否 | 空调方式 |
| power_level | VARCHAR(50) | 否 | 供电等级 |
| elevator_count | INT | 否 | 电梯数量 |
| site_area | DECIMAL(18,2) | 否 | 用地面积 |
| site_elevation | DECIMAL(8,2) | 否 | 场地标高 |
| groundwater_level | DECIMAL(8,2) | 否 | 地下水位 |
| geology_condition | VARCHAR(50) | 否 | 地质条件 |
| site_features | VARCHAR(200) | 否 | 场地特点 |
| construction_difficulty | VARCHAR(20) | 否 | 施工难度 |
| traffic_condition | VARCHAR(20) | 否 | 交通条件 |
| special_requirements | VARCHAR(200) | 否 | 特殊要求 |
| quota_standard | VARCHAR(100) | 否 | 取费标准 |
| labor_coefficient | DECIMAL(6,4) | 否 | 人工调整系数 |
| material_adjustment | VARCHAR(50) | 否 | 材料调差方式 |
| special_notes | TEXT | 否 | 特殊说明 |
| created_at | TIMESTAMP | 是 | 创建时间 |
| updated_at | TIMESTAMP | 是 | 更新时间 |

### 8.3 状态枚举

| 状态值 | 显示名称 | 说明 |
|--------|----------|------|
| pending | 待标签化 | 刚从造价文件推送过来 |
| tagging | 待计算指标 | 已完成标签化 |
| indexed | 已生成指标 | 已完成指标计算 |
| completed | 已补录 | 已完成PR补录 |
| pushed | 已推送 | 已提交PR到企业库 |

---

## 9. 接口设计

### 9.1 接口列表

| 接口 | 方法 | 路径 | 说明 |
|------|------|------|------|
| 获取列表 | GET | /api/v1/my-projects | 分页查询列表 |
| 获取详情 | GET | /api/v1/my-projects/{id} | 获取项目详情 |
| 执行标签化 | POST | /api/v1/my-projects/{id}/tagging | 执行标签化处理 |
| 批量标签化 | POST | /api/v1/my-projects/batch-tagging | 批量标签化 |
| 计算指标 | POST | /api/v1/my-projects/{id}/calculate-index | 计算指标 |
| 批量计算指标 | POST | /api/v1/my-projects/batch-calculate-index | 批量计算指标 |
| PR补录 | PUT | /api/v1/my-projects/{id}/pr-info | 更新PR补录信息 |
| 推送到企业库 | POST | /api/v1/my-projects/{id}/push | 提交PR到企业库 |
| 删除项目 | DELETE | /api/v1/my-projects/{id} | 删除项目 |
| 批量删除 | DELETE | /api/v1/my-projects/batch | 批量删除 |

### 9.2 获取列表接口

**请求：**
```
GET /api/v1/my-projects?page=1&pageSize=20&status=indexed&functionTag=hospital
```

**响应：**
```json
{
  "code": 0,
  "message": "success",
  "data": {
    "list": [
      {
        "id": "mp-001",
        "projectName": "XX医院门诊楼项目",
        "status": "indexed",
        "statusName": "已生成指标",
        "functionTagCode": "A0101",
        "functionTagName": "综合医院",
        "scaleLevel": "large",
        "scaleLevelName": "大型",
        "province": "北京市",
        "city": "海淀区",
        "pricingStage": "bidControl",
        "pricingStageName": "招标控制价",
        "totalArea": 25000,
        "totalCost": 85000000,
        "unitCost": 3400,
        "createdAt": "2026-01-18T10:30:00Z"
      }
    ],
    "pagination": {
      "page": 1,
      "pageSize": 20,
      "total": 56,
      "totalPages": 3
    }
  }
}
```

### 9.3 执行标签化接口

**请求：**
```json
POST /api/v1/my-projects/{id}/tagging
{
  "functionTagCode": "A0101",
  "scaleLevel": "large",
  "spaceTypes": ["medical", "public"],
  "professionTypes": ["architecture", "structure", "mep"],
  "unitProjects": [
    {
      "id": "up-001",
      "functionTagCode": "A010101"
    }
  ]
}
```

**响应：**
```json
{
  "code": 0,
  "message": "标签化完成",
  "data": {
    "projectId": "mp-001",
    "status": "tagging",
    "taggedAt": "2026-01-18T11:00:00Z"
  }
}
```

---

## 10. 与其他模块的关系

### 10.1 与标签化流程的关系

"我的项目"是 `Tagging_Process_Spec` 的**实际落地场景**：

| Tagging_Process_Spec | My_Project_Spec |
|---------------------|-----------------|
| 功能标签匹配算法 | 标签化弹窗中的自动识别 |
| 规模分档规则 | 标签化弹窗中的规模分档 |
| 空间/专业映射 | 标签化弹窗中的映射选择 |
| 状态机流转 | 项目状态流转 |

### 10.2 与指标系统的关系

"我的项目"的指标计算是 `Index_Calculation_Spec` 的**实际落地场景**：

| Index_Calculation_Spec | My_Project_Spec |
|-----------------------|-----------------|
| 指标计算公式 | 计算指标弹窗 |
| 指标分类体系 | 经济/工程量/人材机指标 |
| 指标存储 | 自动同步到"我的指标" |

### 10.3 数据流向

```
造价文件采集 ──推送──▶ 我的项目 ──标签化──▶ 我的项目 ──计算指标──▶ 我的项目
                                                          │
                                                          ▼
                                                      我的指标（自动同步）
                                                          │
                      ┌───────────────────────────────────┘
                      ▼
我的项目 ──PR补录──▶ 我的项目 ──推送PR──▶ 企业库（案例库+指标库）
```

---

## 11. 版本历史

| 版本 | 日期 | 修订内容 | 作者 |
|------|------|----------|------|
| V1.0 | 2026-01-18 | 初版 | - |