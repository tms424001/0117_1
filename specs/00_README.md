# 工程造价数字化平台 - 功能规格说明书

> 版本：V1.1  
> 更新日期：2026-01-18  
> 文档状态：持续完善中

---

## 1. 平台概述

### 1.1 平台定位

```
┌─────────────────────────────────────────────────────────────────┐
│                                                                 │
│   理论基础：材料标准化 + 清单标准化 + 指标标准化                  │
│                                                                 │
│   核心能力：标准化引擎（归一化 + 结构化）                         │
│                                                                 │
│   价值主张：让造价数据从"给人看"进化为"给机器用"                 │
│            从"电子文档"升级为"数字资产"                          │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 1.2 两条主线

```
┌─────────────────────────────────────────────────────────────────┐
│                                                                 │
│                        工程造价数字化平台                        │
│                                                                 │
│    ┌─────────────────────┐       ┌─────────────────────┐       │
│    │                     │       │                     │       │
│    │      建设线          │       │       应用线        │       │
│    │   （数据资产沉淀）    │ ───▶ │   （数据价值变现）   │       │
│    │                     │ ◀─── │                     │       │
│    │  数据采集            │       │  质控               │       │
│    │  数据资产            │       │  计价               │       │
│    │                     │       │  估算               │       │
│    └─────────────────────┘       └─────────────────────┘       │
│                                                                 │
│              数据飞轮：用得越多，数据越多；数据越多，用得越准     │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 1.3 核心价值

| 维度 | 传统模式 | 本平台 |
|------|----------|--------|
| **数据状态** | 电子文档，人看 | 数字资产，机器用 |
| **数据积累** | 项目结束即归档 | 自动沉淀，持续增值 |
| **质控方式** | 人工审核，事后纠偏 | 规则引擎，事中监控 |
| **计价效率** | 手工套定额 | 智能推荐，效率提升5倍+ |
| **估算依据** | 经验为主 | 数据驱动，多级精度 |
| **知识复用** | 存在个人脑中 | 沉淀为企业资产 |

---

## 2. 平台架构

### 2.1 功能模块总览

```
┌───────────────────────────────────────────────────────────────────────┐
│  LOGO  │  数据采集  │  数据资产  │  质控  │  计价  │  估算  │   👤    │
└───────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────┐
│                                                                         │
│  📥 数据采集                 数据入口，汇集所有来源，统一加工流程         │
│  ├─ 造价文件（汇集质控/计价/上传，标明来源）                            │
│  │   ├─ 解析出：项目 + 材价 + 综价 + 指标                               │
│  │   └─ 操作：预览 → 分析 → 补录 → 推送                                │
│  ├─ 材价文件（上传 → 标准化 → 汇入我的材价）                            │
│  ├─ 综价文件（上传 → 标准化 → 汇入我的综价）                            │
│  └─ 我的数据（第一步加工后的个人数据仓库）                              │
│      ├─ 我的项目 ← 造价文件                                             │
│      ├─ 我的材价 ← 造价文件(解析) + 材价文件(上传) 【汇聚】             │
│      ├─ 我的综价 ← 造价文件(解析) + 综价文件(上传) 【汇聚】             │
│      └─ 我的指标 ← 造价文件(分析生成)                                   │
│                                                                         │
│  📊 数据资产                 企业数据中台，第二步加工后的企业级资产       │
│  ├─ 企业库                                                               │
│  │   ├─ 材价库 ← 我的材价PR审核通过                                     │
│  │   ├─ 综价库 ← 我的综价PR审核通过                                     │
│  │   ├─ 指标库 ← 我的指标PR审核通过                                     │
│  │   └─ 案例库 ← 我的项目PR审核通过                                     │
│  └─ 数据商城                                                             │
│      ├─ 信息价（外部信息价数据源）                                       │
│      ├─ 公共资源案例库（平台公共数据）                                   │
│      └─ 会员单位数据（会员数据交换）                                     │
│                                                                         │
│  🔍 质控                     造价成果的智能审核与对比分析                 │
│  ├─ 单文件检查（合规/价格/清单/指标）                                   │
│  ├─ 多文件对比（清标/结算复核/概算归集/对标分析）                       │
│  └─ 💡 快速采集：采集即用，完成后自动沉淀到"造价文件"                   │
│                                                                         │
│  💰 计价                     赋能客户端的计价能力支撑                    │
│  ├─ 智能套定额（清单→定额匹配）                                         │
│  ├─ 质控服务（成果→Issue）                                              │
│  ├─ 算力底座（标准清单库/定额库/映射规则库）                            │
│  └─ 💡 快速采集：采集即用，完成后自动沉淀到"造价文件"                   │
│                                                                         │
│  📈 估算                     多精度投资估算能力                          │
│  ├─ 指标匡算 ✅ 已完成（精度±15%~20%，适用可研/投资决策）               │
│  │   ├─ 项目总体估算                                                    │
│  │   └─ 单项+总平估算                                                   │
│  ├─ 详细估算（精度±10%~15%，适用初设/限额设计）                         │
│  │   ├─ 工程量指标配置                                                  │
│  │   ├─ 单价函数配置                                                    │
│  │   └─ 设计/环境参数输入                                               │
│  └─ 模块化测算（精度±5%~10%，适用方案比选）                             │
│      └─ 基坑支护 / 地基处理 / 桩基工程 / 幕墙工程...                    │
│                                                                         │
│  ⚙️ 系统管理                 基准数据、标准库、规则、权限管理（管理员）   │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### 2.2 模块关系（数据飞轮）

```
┌─────────────────────────────────────────────────────────────────────────┐
│                                                                         │
│     ┌─────────────┐    ┌─────────────┐    ┌─────────────┐              │
│     │  质控模块    │    │  计价模块    │    │  主动上传    │              │
│     │  快速采集    │    │  快速采集    │    │             │              │
│     └──────┬──────┘    └──────┬──────┘    └──────┬──────┘              │
│            │ 来源:质控        │ 来源:计价        │ 来源:上传             │
│            └──────────────────┼──────────────────┘                      │
│                               ▼ 自动沉淀                                │
│                      ┌─────────────────┐                                │
│                      │    数据采集      │  ← 汇集所有来源               │
│                      │   (造价文件)     │                                │
│                      └────────┬────────┘                                │
│                               │ 第一步加工                              │
│                               ▼                                         │
│                      ┌─────────────────┐                                │
│                      │    我的数据      │  ← 个人数据仓库               │
│                      └────────┬────────┘                                │
│                               │ 第二步加工(PR+审核)                      │
│                               ▼                                         │
│                      ┌─────────────────┐                                │
│                      │    数据资产      │  ← 企业库                     │
│                      │   (企业中台)     │                                │
│                      └────────┬────────┘                                │
│                               │                                         │
│              ┌────────────────┼────────────────┐                       │
│              ▼                ▼                ▼                       │
│     ┌─────────────┐  ┌─────────────┐  ┌─────────────┐                 │
│     │   质控模块   │  │   计价模块   │  │   估算模块   │                 │
│     │  (数据消费)  │  │  (数据消费)  │  │  (数据消费)  │                 │
│     └──────┬──────┘  └──────┬──────┘  └─────────────┘                 │
│            │                │                                          │
│            └────────┬───────┘                                          │
│                     │ 业务完成，自动沉淀                                 │
│                     ▼                                                   │
│              回到数据采集（数据飞轮闭环）                                 │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### 2.3 数据流全景

```
┌─────────────────────────────────────────────────────────────────────────┐
│                              数据入口（多来源）                          │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│   ┌─────────────┐    ┌─────────────┐    ┌─────────────┐                │
│   │  质控模块    │    │  计价模块    │    │  主动上传    │                │
│   │  快速采集    │    │  快速采集    │    │  (存量数据)  │                │
│   │  采集即用    │    │  采集即用    │    │             │                │
│   └──────┬──────┘    └──────┬──────┘    └──────┬──────┘                │
│          │                  │                  │                        │
│          │ 来源:质控        │ 来源:计价        │ 来源:上传               │
│          └──────────────────┼──────────────────┘                        │
│                             ▼ 自动沉淀                                  │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│   📥 数据采集模块（三类文件，统一加工流程）                              │
│                                                                         │
│   ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐        │
│   │    造价文件      │  │    材价文件      │  │    综价文件      │        │
│   │ (质控/计价/上传) │  │    (上传)        │  │    (上传)        │        │
│   ├─────────────────┤  ├─────────────────┤  ├─────────────────┤        │
│   │ 预览:           │  │ 预览:           │  │ 预览:           │        │
│   │ • 项目树        │  │ • 材料清单      │  │ • 清单项        │        │
│   │ • 分部分项      │  │ • 价格信息      │  │ • 综合单价      │        │
│   │ • 措施/规费/税金│  │                 │  │ • 组成明细      │        │
│   ├─────────────────┤  ├─────────────────┤  ├─────────────────┤        │
│   │ 分析(标准化):   │  │ 分析(标准化):   │  │ 分析(标准化):   │        │
│   │ • 材料→SMLCode  │  │ • 材料→SMLCode  │  │ • 清单→SBoQCode │        │
│   │ • 清单→SBoQCode │  │ • 属性→ParamMap │  │ • 特征→FeatureMap│       │
│   ├─────────────────┤  ├─────────────────┤  ├─────────────────┤        │
│   │ 补录(元数据):   │  │ 补录(元数据):   │  │ 补录(元数据):   │        │
│   │ • 材价期/地区   │  │ • 材价期/地区   │  │ • 材价期/地区   │        │
│   │ • 阶段/建设规模 │  │ • 供应商/品牌   │  │ • 计价阶段      │        │
│   └────────┬────────┘  └────────┬────────┘  └────────┬────────┘        │
│            │                    │                    │                  │
│            │ 解析出:            │                    │                  │
│            │ 项目+材价+综价+指标│                    │                  │
│            ▼                    ▼                    ▼                  │
│   ┌─────────────────────────────────────────────────────────────────┐   │
│   │                        数据汇聚合并                              │   │
│   ├──────────────┬──────────────┬──────────────┬────────────────────┤   │
│   │              │    材价数据   │    综价数据   │                    │   │
│   │    项目数据   │   ┌───────┐  │   ┌───────┐  │    指标数据        │   │
│   │   (造价文件)  │   │造价解析│  │   │造价解析│  │   (造价文件)       │   │
│   │              │   │   +    │  │   │   +    │  │                    │   │
│   │              │   │材价上传│  │   │综价上传│  │                    │   │
│   │              │   └───────┘  │   └───────┘  │                    │   │
│   └──────────────┴──────────────┴──────────────┴────────────────────┘   │
│                             │                                           │
│                             ▼ 推送                                      │
│   ┌─────────────────────────────────────────────────────────────────┐   │
│   │                  我的数据（个人数据仓库）                         │   │
│   ├───────────────┬───────────────┬───────────────┬─────────────────┤   │
│   │   我的项目     │    我的材价    │    我的综价    │    我的指标     │   │
│   │               │               │               │                 │   │
│   │ 来源:         │ 来源:         │ 来源:         │ 来源:           │   │
│   │ • 造价文件    │ • 造价文件    │ • 造价文件    │ • 造价文件      │   │
│   │               │ • 材价文件    │ • 综价文件    │                 │   │
│   └───────────────┴───────────────┴───────────────┴─────────────────┘   │
│                             │                                           │
│                             │ 第二步加工（PR推送+审核）                  │
│                             ▼                                           │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│   📊 数据资产模块                                                       │
│   ┌─────────────────────────────────────────────────────────────────┐   │
│   │                  企业库（企业数据中台）                           │   │
│   ├───────────────┬───────────────┬───────────────┬─────────────────┤   │
│   │    案例库      │    材价库      │    综价库      │    指标库       │   │
│   │      ↑        │      ↑        │      ↑        │      ↑         │   │
│   │   我的项目     │   我的材价     │   我的综价     │   我的指标      │   │
│   └───────────────┴───────────────┴───────────────┴─────────────────┘   │
│                                                                         │
│   ┌─────────────────────────────────────────────────────────────────┐   │
│   │                  数据商城（外部/共享数据）                        │   │
│   ├───────────────────┬───────────────────┬─────────────────────────┤   │
│   │      信息价        │   公共资源案例库   │     会员单位数据        │   │
│   │  (外部信息价源)    │   (平台公共数据)   │   (会员数据交换)        │   │
│   └───────────────────┴───────────────────┴─────────────────────────┘   │
│                             │                                           │
│            ┌────────────────┼────────────────┐                         │
│            ▼                ▼                ▼                         │
│   ┌─────────────┐  ┌─────────────┐  ┌─────────────┐                   │
│   │   质控模块   │  │   计价模块   │  │   估算模块   │                   │
│   │   (数据用)   │  │   (数据用)   │  │   (数据用)   │                   │
│   └──────┬──────┘  └──────┬──────┘  └─────────────┘                   │
│          │                │                                            │
│          └────────────────┘                                            │
│                  │                                                      │
│                  ▼ 业务完成后自动沉淀（数据飞轮）                        │
│             回到数据采集模块                                            │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

**三类文件统一加工流程：**

| 步骤 | 造价文件 | 材价文件 | 综价文件 |
|------|----------|----------|----------|
| **预览** | 项目树/分部分项/措施/规费/税金 | 材料清单/价格信息 | 清单项/综合单价/组成明细 |
| **分析** | 材料→SMLCode，清单→SBoQCode | 材料→SMLCode，属性→ParamMap | 清单→SBoQCode，特征→FeatureMap |
| **补录** | 材价期/地区/阶段/建设规模 | 材价期/地区/供应商/品牌 | 材价期/地区/计价阶段 |
| **推送** | → 我的项目/材价/综价/指标 | → 我的材价 | → 我的综价 |

**数据汇聚规则：**

| 我的数据 | 数据来源 | 说明 |
|----------|----------|------|
| 我的项目 | 造价文件 | 仅来自造价文件 |
| 我的材价 | 造价文件(解析) + 材价文件(上传) | 双通道合并 |
| 我的综价 | 造价文件(解析) + 综价文件(上传) | 双通道合并 |
| 我的指标 | 造价文件(分析生成) | 仅来自造价文件 |

### 2.4 核心引擎

```
┌─────────────────────────────────────────────────────────────────┐
│                          核心引擎层                              │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────────────────────┐  ┌─────────────────────────┐  │
│  │        标准化引擎            │  │        分析引擎          │  │
│  ├─────────────────────────────┤  ├─────────────────────────┤  │
│  │  归一化                      │  │  指标计算               │  │
│  │  • 材料 → SMLCode           │  │  • 经济指标             │  │
│  │  • 清单 → SBoQCode          │  │  • 工程量指标           │  │
│  │  结构化                      │  │  • 工料机指标           │  │
│  │  • 材料属性 → ParamMap      │  │  聚合分析               │  │
│  │  • 清单特征 → FeatureMap    │  │  • 分部汇总/占比计算    │  │
│  └─────────────────────────────┘  └─────────────────────────┘  │
│                                                                 │
│  ┌─────────────────────────────┐  ┌─────────────────────────┐  │
│  │        质控引擎              │  │        估算引擎          │  │
│  ├─────────────────────────────┤  ├─────────────────────────┤  │
│  │  规则检查                    │  │  指标推荐               │  │
│  │  • 合规性/价格逻辑/完整性    │  │  • 单方造价/工程量指标  │  │
│  │  对比分析                    │  │  单价函数               │  │
│  │  • 文件内/跨文件/历史数据    │  │  • 材料基准价/系数调整  │  │
│  └─────────────────────────────┘  └─────────────────────────┘  │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 3. 文档体系

### 3.1 项目目录结构

```
0117_1/
│
├── specs/                                # 📚 功能规格说明书
│   ├── 00_README.md                      # 本文档 - 平台总览
│   ├── 01_Foundation/                    # 基础规范 ✅
│   ├── 02_Standard_Library/              # 标准库 ✅
│   ├── 03_Data_Collection/               # 数据采集 ⚠️
│   ├── 04_Data_Tagging/                  # 数据标签化 ✅
│   ├── 05_Index_System/                  # 指标系统 ✅
│   ├── 06_Estimation_Pricing/            # 估算定价 ⚠️
│   └── 07_Technical/                     # 技术规范 ✅
│
├── src/                                  # 📦 源代码
│   ├── components/                       # 公共组件
│   ├── config/                           # 配置文件
│   ├── hooks/                            # 自定义Hooks
│   ├── pages/                            # 页面组件
│   │   ├── Dashboard/                    # 仪表盘
│   │   ├── estimation/                   # 估算模块
│   │   ├── index/                        # 指标模块
│   │   ├── project/                      # 项目管理
│   │   └── standard/                     # 标准库
│   ├── routes/                           # 路由配置
│   ├── styles/                           # 样式文件
│   ├── App.tsx                           # 应用入口
│   └── main.tsx                          # 主入口
│
├── 目录.md                               # 项目目录说明
├── index.html                            # HTML入口
├── package.json                          # 依赖配置
├── tailwind.config.js                    # Tailwind配置
├── tsconfig.json                         # TypeScript配置
└── postcss.config.js                     # PostCSS配置
```

### 3.2 规格文档目录结构

```
specs/
│
├── 00_README.md                          # 本文档 - 平台总览
│
├── 01_Foundation/                        # 基础规范 ✅
│   ├── Design_Token_Spec.md              # 设计令牌规范
│   ├── Interaction_Pattern_Spec.md       # 交互模式规范
│   ├── Layout_Spec.md                    # 布局规范
│   └── Permission_Spec.md                # 权限规范
│
├── 02_Standard_Library/                  # 标准库 ✅
│   ├── Tag_System_Spec.md                # 功能标签体系（239标签）
│   ├── Scale_Range_Spec.md               # 规模分档规范（7类35档）
│   └── Standard_Mapping_Spec.md          # 空间/专业映射规范
│
├── 03_Data_Collection/                   # 数据采集 ⚠️ 部分完成
│   ├── Cost_File_Spec.md                 # 造价文件采集 📋 待重构
│   │   # 包含：上传/预览/分析/补录/推送等完整流程
│   ├── Material_Price_Spec.md            # 材价文件采集 📋 待补充
│   ├── Composite_Price_Spec.md           # 综价文件采集 📋 待补充
│   └── My_Data_Spec.md                   # 我的数据（个人数据仓库）📋 待补充
│       # 包含：我的项目/我的材价/我的综价/我的指标
│
├── 04_Data_Tagging/                      # 数据标签化 ✅
│   └── Tagging_Process_Spec.md           # 标签化流程规范
│
├── 05_Index_System/                      # 指标系统 ✅
│   ├── Index_Calculation_Spec.md         # 指标计算规范
│   ├── Index_Analysis_Spec.md            # 指标分析规范
│   └── Index_Publish_Spec.md             # 指标发布规范
│
├── 06_Estimation_Pricing/                # 估算定价 ⚠️ 部分完成
│   ├── Estimation_Spec.md                # 指标匡算 ✅
│   ├── Pricing_Support_Spec.md           # 定价支持 ✅
│   ├── Detailed_Estimation_Spec.md       # 详细估算 📋 待补充
│   └── Module_Estimation_Spec.md         # 模块化测算 📋 待补充
│
├── 07_Technical/                         # 技术规范 ✅
│   ├── API_Contract_Spec.md              # API契约规范
│   ├── Data_Model_Spec.md                # 数据模型规范
│   ├── Maintainability_Spec.md           # 可维护性规范
│   └── Performance_Spec.md               # 性能规范
│
├── 08_Data_Asset/                        # 数据资产 📋 待补充
│   ├── Enterprise_Library_Spec.md        # 企业库（四库）
│   │   # 材价库 ←→ 我的材价
│   │   # 综价库 ←→ 我的综价
│   │   # 指标库 ←→ 我的指标
│   │   # 案例库 ←→ 我的项目
│   └── Data_Marketplace_Spec.md          # 数据商城
│
├── 09_Quality_Control/                   # 质控模块 📋 待补充
│   ├── Single_File_Check_Spec.md         # 单文件检查
│   └── Multi_File_Compare_Spec.md        # 多文件对比
│
├── 10_Pricing_Service/                   # 计价服务 📋 待补充
│   ├── Smart_Quota_Spec.md               # 智能套定额
│   ├── QC_Service_Spec.md                # 质控服务
│   └── Computing_Base_Spec.md            # 算力底座
│
└── 11_System_Admin/                      # 系统管理 📋 待补充
    ├── Baseline_Data_Spec.md             # 基准数据管理
    ├── Standard_Library_Maintain_Spec.md # 标准库维护
    └── Rule_Config_Spec.md               # 规则配置
```

### 3.3 文档完成状态

| 模块 | 文档数 | 状态 | 说明 |
|------|--------|:----:|------|
| 01_Foundation | 4/4 | ✅ | 设计令牌、交互、布局、权限 |
| 02_Standard_Library | 3/3 | ✅ | 标签、规模档、映射 |
| 03_Data_Collection | 0/4 | 📋 | 造价文件(需重构)/材价/综价/我的数据 |
| 04_Data_Tagging | 1/1 | ✅ | 标签化流程 |
| 05_Index_System | 3/3 | ✅ | 计算、分析、发布 |
| 06_Estimation_Pricing | 2/4 | ⚠️ | 匡算✅、定价✅，详估/模块化待补充 |
| 07_Technical | 4/4 | ✅ | API、数据模型、可维护性、性能 |
| 08_Data_Asset | 0/2 | 📋 | 企业库、商城 |
| 09_Quality_Control | 0/2 | 📋 | 单文件检查、多文件对比 |
| 10_Pricing_Service | 0/3 | 📋 | 套定额、质控服务、算力底座 |
| 11_System_Admin | 0/3 | 📋 | 基准数据、标准库、规则 |

**当前进度：17/33 文档完成（52%）**

> 注：原 Data_Collection_Spec.md 为简化版，需重构为完整的 Cost_File_Spec.md

---

### 3.4 已完成的核心体系：指标生成 + 指标匡算

我们已完成了一套**可独立运行**的指标匡算系统：

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    ✅ 已完成：指标生成 + 指标匡算体系                    │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐                │
│  │ 02_标准库    │    │ 04_标签化   │    │ 05_指标系统  │                │
│  │ ✅ 3/3      │    │ ✅ 1/1      │    │ ✅ 3/3      │                │
│  ├─────────────┤    ├─────────────┤    ├─────────────┤                │
│  │ • 功能标签   │    │ • 标签化流程 │    │ • 指标计算   │                │
│  │   239个     │ →  │   5步处理   │ →  │ • 指标分析   │                │
│  │ • 规模分档   │    │ • 状态机    │    │ • 指标发布   │                │
│  │   7类35档   │    │ • 业务规则   │    │ • 版本管理   │                │
│  │ • 空间/专业  │    │             │    │             │                │
│  └─────────────┘    └─────────────┘    └─────────────┘                │
│                                               │                        │
│                                               ▼                        │
│                                    ┌─────────────────┐                 │
│                                    │ 06_估算(部分)   │                 │
│                                    │ ✅ 2/4         │                 │
│                                    ├─────────────────┤                 │
│                                    │ • 指标匡算 ✅   │ ← 精度±15%~20% │
│                                    │ • 定价支持 ✅   │   适用可研阶段  │
│                                    │ • 详细估算 📋   │                 │
│                                    │ • 模块化测算 📋 │                 │
│                                    └─────────────────┘                 │
│                                                                         │
│  配套完成：01_基础规范 ✅ 4/4  |  07_技术规范 ✅ 4/4                    │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘

📌 这套体系可以独立开发上线，支撑投资决策阶段的快速估算需求
```

**估算模块三个层级对比：**

| 层级 | 精度 | 适用阶段 | 文档状态 | 说明 |
|------|------|----------|:--------:|------|
| **指标匡算** | ±15%~20% | 可研、投资决策 | ✅ 已完成 | 基于经济指标快速估算 |
| 详细估算 | ±10%~15% | 初设、限额设计 | 📋 待补充 | 基于工程量指标+单价函数 |
| 模块化测算 | ±5%~10% | 方案比选 | 📋 待补充 | 基于专项模块参数化公式 |

---

## 4. 已完成文档概要

### 4.1 基础规范 (01_Foundation)

| 文档 | 核心内容 |
|------|----------|
| Design_Token_Spec | 品牌色、功能色、中性色、字体系统(14px基准)、间距(4px栅格)、圆角、阴影、动效、暗色主题 |
| Interaction_Pattern_Spec | 加载状态(骨架屏)、空状态、成功/错误反馈、表单交互、确认机制、列表操作、快捷键 |
| Layout_Spec | Header(56px)、Sidebar(220px)、Content、5种页面模板、24栅格、响应式断点 |
| Permission_Spec | RBAC模型、8个系统角色、50+权限、数据权限(全部/部门/本人)、审计日志 |

### 4.2 标准库 (02_Standard_Library)

| 文档 | 核心内容 |
|------|----------|
| Tag_System_Spec | 三维分类框架、14大类、239个功能标签、标签匹配算法、API接口 |
| Scale_Range_Spec | 7种规模类型(面积/床位/班级等)、35个规模档、自动匹配逻辑 |
| Standard_Mapping_Spec | 4类空间、21类专业、功能-空间映射、功能-专业映射、交叉矩阵 |

### 4.3 数据采集 (03_Data_Collection) ✅ 已完成

| 文档 | 状态 | 核心内容 |
|------|:----:|----------|
| Cost_File_Spec | ✅ | 造价文件采集：7种格式支持、左树右表预览、5步处理流程（上传→预览→分析→补录→推送）、4种数据来源（质控/计价/估算/上传）、快速采集模式 |
| Material_Price_Spec | ✅ | 材价文件采集：4种格式、SMLCode标准化、ParamMap属性映射、4种材价来源（供应商/网站/合同/财评）、推送到我的材价 |
| Composite_Price_Spec | ✅ | 综价文件采集：4种格式、SBoQCode标准化、FeatureMap特征映射、4种综价来源、推送到我的综价 |
| My_Project_Spec | ✅ | 我的项目：标签化处理（239标签匹配）、规模分档、指标计算、PR补录（40+字段）、推送到企业库 |
| My_Index_Spec | ✅ | 我的指标：项目级/单位工程级指标、经济/工程量/人材机三类指标、PR补录、推送到指标库 |
| My_Material_Price_Spec | ✅ | 我的材价：双来源汇聚（造价文件解析+材价文件上传）、标准化映射调整、PR补录、推送到材价库 |
| My_Composite_Price_Spec | ✅ | 我的综价：双来源汇聚、单价组成（人材机+管理+利润）、PR补录、推送到综价库 |
| PR_Review_Spec | ✅ | PR审核流程：轻量审核（待审核→审核中→通过/驳回）、提交人/审核员双视角、批量审核、消息通知 |

### 4.4 数据标签化 (04_Data_Tagging)

| 文档 | 核心内容 |
|------|----------|
| Tagging_Process_Spec | 5步处理流程、状态机(4状态/6转换)、自动匹配+手工调整、24条业务规则 |

### 4.5 指标系统 (05_Index_System)

| 文档 | 核心内容 |
|------|----------|
| Index_Calculation_Spec | 5步计算流程、3种异常检测(IQR/Z-Score/经验值)、质量评分、增量计算 |
| Index_Analysis_Spec | 6种分析类型、7种图表组件、交互式分析、质量弱项识别 |
| Index_Publish_Spec | 版本号规则、6个状态、5步审核、4种发布策略、回滚支持 |

### 4.6 估算定价 (06_Estimation_Pricing)

| 文档 | 核心内容 |
|------|----------|
| Estimation_Spec | 3种估算类型(快速/标准/精细)、4级指标匹配、方案对比、报告输出 |
| Pricing_Support_Spec | 价格查询、价格分析、报价测算、敏感性分析、风险提示 |

### 4.7 技术规范 (07_Technical)

| 文档 | 核心内容 |
|------|----------|
| API_Contract_Spec | RESTful规范、HTTP方法/状态码、JWT认证、版本管理、限流 |
| Data_Model_Spec | PostgreSQL、命名规范、6模块DDL、索引设计、数据安全 |
| Maintainability_Spec | 代码规范、分层架构、错误处理、日志规范、测试规范(≥80%) |
| Performance_Spec | Core Web Vitals、API<500ms、并发500+、缓存策略、监控告警 |

---

## 5. 待补充文档规划

### 5.1 数据资产模块 (04_Data_Asset) 📋 待设计

#### 5.1.1 企业库（4个文档）

| 文档 | 主要内容 |
|------|----------|
| Enterprise_Material_Price_Spec | 企业材价库：材价管理、多维查询（材料分类/地区/时间）、批量导出、价格趋势分析、数据维护 |
| Enterprise_Composite_Price_Spec | 企业综价库：综价管理、分部分项筛选、计价阶段筛选、批量导出、数据维护 |
| Enterprise_Index_Spec | 企业指标库：指标管理、多维查询、指标对比分析、指标发布、数据维护 |
| Enterprise_Case_Spec | 企业案例库：案例管理、功能标签/规模档筛选、案例详情、多维分析、数据维护 |

#### 5.1.2 数据商城（3个文档）

| 文档 | 主要内容 |
|------|----------|
| Market_Info_Price_Spec | 信息价：外部信息价查询（造价站/政府发布）、地区/时间筛选、订阅管理、价格趋势、下载导出 |
| Market_Public_Case_Spec | 公共资源案例库：平台公共案例查询、功能标签/规模档筛选、收藏、对比参考、引用到估算 |
| Market_Member_Data_Spec | 会员单位数据：会员数据目录、数据申请流程、授权管理、数据交换、积分/权益体系 |

**企业库 vs 数据商城 对比：**

| 维度 | 企业库 | 数据商城 |
|------|--------|----------|
| 数据所有权 | 企业自有 | 平台/第三方/会员共享 |
| 数据来源 | 我的数据→PR审核→入库 | 外部采购/平台提供/会员交换 |
| 主要功能 | 管理、维护、查询、导出 | 查询、订阅、下载、交换 |
| 权限模式 | 企业内部权限 | 订阅/付费/会员权限 |

### 5.2 估算模块补充 (06_Estimation) 📋 待设计

| 文档 | 主要内容 | 精度 | 适用阶段 |
|------|----------|------|----------|
| ~~Estimation_Spec~~ | ~~指标匡算~~ | ~~±15%~20%~~ | ~~✅ 已完成~~ |
| Detailed_Estimation_Spec | 工程量指标配置、单价函数配置、设计/环境参数 | ±10%~15% | 初设、限额设计 |
| Module_Estimation_Spec | 基坑支护、地基处理、桩基工程、幕墙工程等模块化公式 | ±5%~10% | 方案比选 |

### 5.3 质控模块 (07_Quality_Control) 📋 待设计

| 文档 | 主要内容 |
|------|----------|
| Single_File_Check_Spec | 合规性检查、材料价格检查、综合单价检查、清单缺陷、指标合理性 |
| Multi_File_Compare_Spec | 清标(投标对比)、结算复核、概算归集、对标分析 |

### 5.4 计价服务模块 (08_Pricing_Service) 📋 待设计

| 文档 | 主要内容 |
|------|----------|
| Smart_Quota_Spec | 清单接收、定额匹配算法、结果返回、客户端取费组价 |
| QC_Service_Spec | 成果接收、Issue生成、修改闭合流程 |
| Computing_Base_Spec | 标准清单库、定额库、映射规则库、版本管理、订阅下载 |

### 5.5 系统管理模块 (09_System_Admin) 📋 待设计

| 文档 | 主要内容 |
|------|----------|
| Baseline_Data_Spec | 材料基准价、清单基准价、经济指标基准、工程量指标基准 |
| Standard_Library_Maintain_Spec | SML标准材料库、SBoQ标准清单库、定额库维护 |
| Rule_Config_Spec | 质控规则配置、审核标准配置、规则版本管理 |

---

## 6. 技术栈

### 6.1 前端技术

| 技术 | 版本 | 用途 |
|------|------|------|
| React | 18+ | UI框架 |
| TypeScript | 5+ | 类型系统 |
| Ant Design | 5+ | UI组件库 |
| ECharts | 5+ | 图表可视化 |
| React Query | 5+ | 数据请求 |
| Zustand | 4+ | 状态管理 |

### 6.2 后端技术

| 技术 | 版本 | 用途 |
|------|------|------|
| Node.js | 20+ | 运行时 |
| NestJS | 10+ | 后端框架 |
| TypeORM | 0.3+ | ORM框架 |
| PostgreSQL | 15+ | 主数据库 |
| Redis | 7+ | 缓存 |
| BullMQ | 4+ | 任务队列 |
| Elasticsearch | 8+ | 全文搜索 |

### 6.3 基础设施

| 组件 | 用途 |
|------|------|
| Nginx | 反向代理、负载均衡 |
| Docker | 容器化部署 |
| Kubernetes | 容器编排 |
| MinIO/OSS | 文件存储 |
| Prometheus + Grafana | 监控 |
| ELK | 日志 |

---

## 7. 商业模式

### 7.1 To B：企业客户

| 模式 | 说明 |
|------|------|
| SaaS专业版 | 单省份定额 + 质控 + 估算 |
| SaaS企业版 | 多省份 + 企业库 + API |
| 私有化部署 | 大型企业定制化部署 |

### 7.2 To C：个人用户（通过麒麟小匠）

| 服务 | 计费方式 |
|------|----------|
| 定额库 | 按省份/按年订阅 |
| 智能套定额 | 按次/按月 |
| 质控检查 | 按次/按月 |

---

## 8. 版本历史

| 版本 | 日期 | 修订内容 |
|------|------|----------|
| V1.0 | 2026-01-17 | 初版，完成18个规范文档，覆盖指标生成与估算应用 |
| V1.1 | 2026-01-18 | 完成数据采集模块8个规范文档（造价/材价/综价文件采集、我的项目/指标/材价/综价、PR审核） |

---

## 9. 附录

### 9.1 术语表

| 术语 | 说明 |
|------|------|
| SML | Standard Material Library，标准材料库 |
| SMLCode | 标准材料编码 |
| SBoQ | Standard Bill of Quantities，标准清单库 |
| SBoQCode | 标准清单编码 |
| ParamMap | 材料属性映射 |
| FeatureMap | 清单特征映射 |
| 功能标签 | 建筑功能的标准化分类标识 |
| 规模分档 | 按建筑规模划分的区间档位 |
| 单方造价 | 每平方米建筑面积的造价 |
| 造价指标 | 统计计算得出的参考单价 |
| 数据飞轮 | 用→沉淀→用的良性循环 |

### 9.2 参考资料

- 《建筑工程建筑面积计算规范》GB/T 50353
- 《建设工程工程量清单计价规范》GB 50500
- 《建设项目投资估算编审规程》CECA/GC 4

---

**文档维护说明：**

1. 本文档随平台迭代持续更新
2. 各模块文档独立维护版本
3. 重大变更需经评审后发布
4. 问题反馈请联系产品团队